<!doctype html> <html lang="en" class="no-js"> <head> <meta charset="utf-8"> <title>Connecting Elm to Phoenix 1.3 | Floor and Varnish</title> <meta name="description" content="Configuring Elm for use in a Phoenix 1.3 app using Brunch."> <meta name="author" content="Paul Fioravanti"> <meta property="article:author" content="Paul Fioravanti"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:site_name" content="Floor and Varnish"> <meta property="og:title" content="Connecting Elm to Phoenix 1.3"> <meta property="og:url" content="https://www.paulfioravanti.com/blog/elm-phoenix-13/"> <meta property="og:description" content="Configuring Elm for use in a Phoenix 1.3 app using Brunch."> <meta property="og:image" content="https://www.paulfioravanti.com/assets/images/2018-02-09/functional_web_wallpaper.jpg"> <meta name="twitter:site" content="@paulfioravanti"> <meta name="twitter:title" content="Connecting Elm to Phoenix 1.3"> <meta name="twitter:description" content="Configuring Elm for use in a Phoenix 1.3 app using Brunch."> <meta name="twitter:url" content="https://www.paulfioravanti.com/blog/elm-phoenix-13/"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://www.paulfioravanti.com/assets/images/2018-02-09/functional_web_wallpaper.jpg"> <meta name="twitter:creator" content="@paulfioravanti"> <meta property="article:published_time" content="2018-02-09T09:55:00+11:00"> <meta property="article:modified_time" content="2020-11-01T22:00:00+11:00"> <link rel="canonical" href="https://www.paulfioravanti.com/blog/elm-phoenix-13/"> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Paul Fioravanti",
      "url": "https://www.paulfioravanti.com/",
      "sameAs": ["https://twitter.com/paulfioravanti","https://www.linkedin.com/in/paulfioravanti","https://github.com/paulfioravanti","https://stackoverflow.com/users/567863/paul-fioravanti"]
    
  }
</script> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Floor and Varnish Feed"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script>document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/g,"")+" js ";</script> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"> <!--[if IE]><style>.greedy-nav .site-title{padding-right:3em}.greedy-nav button{position:absolute;top:0;right:0;height:100%}</style><![endif]--> </head> <body class="layout--single wide"> <nav class="skip-links"> <h2 class="screen-reader-text">Skip links</h2> <ul> <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li> <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li> <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li> </ul> </nav> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--> <div class="masthead"> <div class="masthead__inner-wrap"> <div class="masthead__menu"> <nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> Floor and Varnish </a> <ul class="visible-links"><li class="masthead__menu-item"> <a href="/about/">About</a> </li></ul> <button class="search__toggle" type="button"> <span class="visually-hidden">Toggle search</span> <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16"> <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path> </svg> </button> <button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">Toggle menu</span> <div class="navicon"></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class="initial-content"> <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2018-02-09/functional_web_wallpaper.jpg');"> <div class="wrapper"> <h1 id="page-title" class="page__title" itemprop="headline"> Connecting Elm to Phoenix 1.3 </h1> <p class="page__lead">Configuring Elm for use in a Phoenix 1.3 app using Brunch. </p> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-calendar-alt" aria-hidden="true"></i> <time datetime="2018-02-09T09:55:00+11:00">February 9, 2018</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-clock" aria-hidden="true"></i> 5 minute read </span> </p> <a href="https://app.rdstation.com.br/mail/9d20f32f-ecc7-40b8-821d-1edfe16fedf8" style="text-decoration: none;"> <img src="https://img.shields.io/badge/Elixir%20Radar-%23131-blueviolet.svg" alt="Elixir Radar #131"> </a> <a href="https://elixirweekly.net/issues/84" style="text-decoration: none;"> <img src="https://img.shields.io/badge/Elixir%20Weekly-%2384-blueviolet.svg" alt="Elixir Weekly #84"> </a> </div> </div> <div id="main" role="main"> <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <div class="author__avatar"> <a href="/"> <img src="https://s.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee" alt="Paul Fioravanti" itemprop="image"> </a> </div> <div class="author__content"> <a href="/"><h3 class="author__name" itemprop="name">Paul Fioravanti</h3></a> <div class="author__bio" itemprop="description"> <p><img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> code / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> languages <img class="emoji" title=":it:" alt=":it:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f9.png" height="20" width="20"> <img class="emoji" title=":jp:" alt=":jp:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ef-1f1f5.png" height="20" width="20"> / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> mech <img class="emoji" title=":keyboard:" alt=":keyboard:" src="https://github.githubassets.com/images/icons/emoji/unicode/2328.png" height="20" width="20"> / Learning stenography</p> </div> </div> <div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button> <ul class="author__urls social-icons"> <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place"> <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Sydney, Australia</span> </li> <li> <a href="https://www.paulfioravanti.com" itemprop="url"> <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span> </a> </li> <li> <a href="mailto:paul@paulfioravanti.com"> <meta itemprop="email" content="paul@paulfioravanti.com"> <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span> </a> </li> <li> <a href="https://keybase.io/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fas fa-fw fa-key" aria-hidden="true"></i><span class="label">Keybase</span> </a> </li> <li> <a href="https://twitter.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span> </a> </li> <li> <a href="https://www.linkedin.com/in/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span> </a> </li> <li> <a href="https://github.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span> </a> </li> <li> <a href="https://stackoverflow.com/users/567863/paul-fioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span> </a> </li> <li> <a href="https://www.youtube.com/channel/UC_ObnUGtIfRRq6vbxFYRpUg" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-youtube" aria-hidden="true"></i><span class="label">YouTube</span> </a> </li> </ul> </div> </div> <div id="bd_embed_signup"> <form action="https://buttondown.email/api/emails/embed-subscribe/paulfioravanti" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.email/paulfioravanti', 'popupwindow')" class="embeddable-buttondown-form"> <label for="bd-email">Get notified of new posts!</label> <input type="email" name="email" id="bd-email" class="email" placeholder="email address"> <input type="hidden" value="1" name="embed"> <div class="clear"> <input type="submit" value="Subscribe" id="bd-embedded-subscribe" class="button"> </div> <p> I send email when I have new content to share. No spam; unsubscribe at any time. <a href="/privacy">Privacy Policy</a> </p> </form> </div> </div> <article class="page" itemscope itemtype="https://schema.org/CreativeWork"> <meta itemprop="headline" content="Connecting Elm to Phoenix 1.3"> <meta itemprop="description" content="Configuring Elm for use in a Phoenix 1.3 app using Brunch."> <meta itemprop="datePublished" content="2018-02-09T09:55:00+11:00"> <meta itemprop="dateModified" content="2020-11-01T22:00:00+11:00"> <div class="page__inner-wrap"> <section class="page__content" itemprop="text"> <p>Want to start using <a href="http://elm-lang.org/">Elm</a> 0.18 on the front end of a <a href="http://phoenixframework.org/">Phoenix</a> app (in this case, <a href="http://phoenixframework.org/blog/phoenix-1-3-0-released">Phoenix 1.3</a>)? This blog post will go over the steps I use to get these two talking to each other.</p> <blockquote> <p>Looking to connect Elm to a Phoenix 1.4 app? Go and check out the update to this blog post: <a href="https://www.paulfioravanti.com/blog/connecting-elm-to-phoenix-1-4-with-webpack/">Connecting Elm to Phoenix 1.4 with webpack</a></p> </blockquote> <p>Assuming you have already <a href="https://hexdocs.pm/phoenix/installation.html#content">installed Phoenix 1.3</a>, let’s kick things off with a new application.</p> <h2 id="generate-phoenix-app">Generate Phoenix app</h2> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix phx.new phoenix_with_elm
<span class="nb">cd </span>phoenix_with_elm
mix ecto.create
mix phx.server
</code></pre></div></div> <p>Navigate to <a href="http://localhost:4000/">http://localhost:4000/</a> and you should see the familiar Phoenix welcome screen.</p> <p><img src="/assets/images/2018-02-09/welcome-to-phoenix.png" alt="Welcome to Phoenix" title="Welcome to Phoenix" class="img-responsive"></p> <p>No surprises here. Close down the server, and let’s move on.</p> <h2 id="generate-elm-app">Generate Elm app</h2> <p>First, install Elm if you haven’t already:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>elm <span class="nt">--global</span>
</code></pre></div></div> <p>Next, in order to help us generate an Elm app with a default structure and sensible configuration, we’ll use <a href="https://github.com/halfzebra/create-elm-app">Create Elm App</a> (inspired by <a href="https://github.com/facebook/create-react-app">Create React App</a>):</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>create-elm-app <span class="nt">--global</span>
</code></pre></div></div> <p>Generate the new Elm app inside the “front end” of the Phoenix application, which in this case means the <code class="language-plaintext highlighter-rouge">assets/</code> directory:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>assets
create-elm-app elm
</code></pre></div></div> <p>You should now have an <code class="language-plaintext highlighter-rouge">elm</code> folder alongside your <code class="language-plaintext highlighter-rouge">js</code> and <code class="language-plaintext highlighter-rouge">css</code> folders. Let’s make sure it works as we expect:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>elm
elm-app start
</code></pre></div></div> <p>Starting the Elm app should then automatically open a browser window for you at <a href="http://localhost:3000/">http://localhost:3000/</a>, and you should see a message saying that…</p> <p><img src="/assets/images/2018-02-09/elm-app-working.png" alt="Your Elm app is working" title="Your Elm app is working" class="img-responsive"></p> <p>Note that the Elm app is running independently here: it knows nothing about the Phoenix environment that it’s located in, and is happily using assets, like the image that you see, from its own <code class="language-plaintext highlighter-rouge">assets/elm/public/</code> directory.</p> <p>Now that we’ve confirmed that both the Phoenix app and the Elm app work of their own accord, it’s time to connect them together. Close down the Elm server and let’s write some config.</p> <h2 id="connect-elm-to-phoenix">Connect Elm to Phoenix</h2> <p>Phoenix uses <a href="http://brunch.io/">Brunch</a> out of the box as its asset build tool, so that’s what we’ll use to compile the Elm code. In order to do that, we’ll need the <a href="https://github.com/madsflensted/elm-brunch">elm-brunch</a> plugin, so let’s install that and get it configured.</p> <p>First, navigate back to the <code class="language-plaintext highlighter-rouge">assets/</code> folder and install elm-brunch:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> elm-brunch
</code></pre></div></div> <p>Then, open up <code class="language-plaintext highlighter-rouge">brunch-config.js</code> in a text editor and make the following changes:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// ...</span>

  <span class="c1">// Step 1: Add "elm" to the list of paths being watched.</span>
  <span class="na">paths</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">watched</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">static</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">css</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">elm</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">vendor</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">},</span>

  <span class="c1">// Step 2: Add the elm-brunch plugin configuration.</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">elmBrunch</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">elmFolder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">elm</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">mainModules</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">src/Main.elm</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">outputFolder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">../vendor</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">outputFile</span><span class="p">:</span> <span class="dl">"</span><span class="s2">elm.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">makeParameters</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">--warn</span><span class="dl">"</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div> <p>Note here specifically the line <code class="language-plaintext highlighter-rouge">outputFolder: "../vendor"</code>: this is to ensure that the generated <code class="language-plaintext highlighter-rouge">elm.js</code> file gets compiled and imported before the <code class="language-plaintext highlighter-rouge">js/app.js</code> file (it is Brunch convention that files in the <code class="language-plaintext highlighter-rouge">assets/vendor</code> directory get compiled before code in other folders; see <a href="http://brunch.io/docs/config#-files-">Brunch’s file config documentation</a> for more details).</p> <blockquote> <p>The <code class="language-plaintext highlighter-rouge">brunch-config.js</code> configuration does apparently allow for <code class="language-plaintext highlighter-rouge">before</code> and <code class="language-plaintext highlighter-rouge">after</code> statements to specify that some files should be compiled before or after others, but I have not had any luck getting them to work, so please consider having the Elm files compiled out into the <code class="language-plaintext highlighter-rouge">vendor</code> folder a hack/workaround for now (since code that we write in the <code class="language-plaintext highlighter-rouge">elm</code> directory does not constitute an external library). If you have been able to use <code class="language-plaintext highlighter-rouge">before</code>/<code class="language-plaintext highlighter-rouge">after</code> compilation order statements in a Phoenix/Elm project, please leave a comment with a link to your config! <strong>[Update 2018-02-16]</strong> See the <a href="#update-2018-02-16">update</a> below that puts your code back in the <code class="language-plaintext highlighter-rouge">js/</code> directory, where it belongs:</p> </blockquote> <h2 id="display-elm-app-in-phoenix-template">Display Elm app in Phoenix template</h2> <p>So that we show both Phoenix and Elm working together, let’s keep the default generated Phoenix layout template as-is, and replace the content of the page index template with a <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> tag for the Elm app:</p> <p><strong><code class="language-plaintext highlighter-rouge">lib/phoenix_with_elm_web/templates/page/index.html.eex</code></strong></p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"elm-main"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div> <p>Next, we’ll target that <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> tag in the app Javascript file and get it to replace it with the content of the Elm app, so add the following to the end of the file:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/js/app.js</code></strong></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">elmDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">elm-main</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">Elm</span><span class="p">.</span><span class="nx">Main</span><span class="p">.</span><span class="nx">embed</span><span class="p">(</span><span class="nx">elmDiv</span><span class="p">);</span>
</code></pre></div></div> <p>Now, run <code class="language-plaintext highlighter-rouge">mix phx.server</code> again and navigate to <a href="http://localhost:4000">http://localhost:4000</a> to see if we’re in business:</p> <p><img src="/assets/images/2018-02-09/phoenix-elm-broken-image.png" alt="Image broken" title="Image broken" class="img-responsive"></p> <p>Not quite yet, it would seem: we can see that the Elm app is being rendered in the template, but we’ve got a broken image. This is because that image currently lives inside the Elm app at <code class="language-plaintext highlighter-rouge">assets/elm/public/logo.svg</code>, and Phoenix doesn’t know anything about compilation of static image assets within Elm applications: it’s looking for assets under its own <code class="language-plaintext highlighter-rouge">assets/static/</code> directory.</p> <p>The path of least resistance here is, I think, to move all assets to where Phoenix is expecting to find them, and change the Elm code to point to them.</p> <p>So, first, move the logo image into Phoenix’s image assets directory:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>assets/elm/public/logo.svg assets/static/images/logo.svg
</code></pre></div></div> <p>Then, change the Elm code to look for the image in Phoenix (<code class="language-plaintext highlighter-rouge">/images/logo.svg</code>), rather than in Elm (<code class="language-plaintext highlighter-rouge">/logo.svg</code>):</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/elm/src/Main.elm</code></strong></p> <div class="language-elm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="kt">Main</span> <span class="k">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="c1">-- ...</span>

<span class="n">view</span> <span class="p">:</span> <span class="kt">Model</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
    <span class="n">div</span> <span class="p">[]</span>
        <span class="p">[</span> <span class="n">img</span> <span class="p">[</span> <span class="n">src</span> <span class="s">"</span><span class="s2">/images/logo.svg"</span> <span class="p">]</span> <span class="p">[]</span>
        <span class="o">,</span> <span class="n">h1</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"</span><span class="s2">Your Elm App is working!"</span> <span class="p">]</span>
        <span class="p">]</span>
</code></pre></div></div> <p>Now, at <a href="http://localhost:4000/">http://localhost:4000/</a>, you should see the following:</p> <p><img src="/assets/images/2018-02-09/phoenix-elm-working.png" alt="Phoenix and Elm working" title="Phoenix and Elm working" class="img-responsive"></p> <p>Great! You’re now successfully bootstrapped to start building out your new Phoenix-and-Elm powered app!</p> <p><br></p> <hr> <p><br></p> <h3 id="update-2018-02-16">Update 2018-02-16</h3> <p>To put the Elm-generated Javascript file into the <code class="language-plaintext highlighter-rouge">js</code> directory (rather than in <code class="language-plaintext highlighter-rouge">vendor</code>, which should only be for third-party code), and then have the app use it properly, edit the codebase in the following way:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/brunch-config.js</code></strong></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// Specify outputFolder to be in the js/ directory, along with app.js</span>
    <span class="na">elmBrunch</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">elmFolder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">elm</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">mainModules</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">src/Main.elm</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">outputFolder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">../js</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">outputFile</span><span class="p">:</span> <span class="dl">"</span><span class="s2">elm.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">makeParameters</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">--warn</span><span class="dl">"</span><span class="p">]</span>
    <span class="p">},</span>

    <span class="c1">// Do not use ES6 compiler in vendor or Elm-generated Javascript code.</span>
    <span class="na">babel</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">ignore</span><span class="p">:</span> <span class="p">[</span>
        <span class="sr">/vendor/</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">js/elm.js</span><span class="dl">"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div> <p>Then, <em>specifically</em> import the <code class="language-plaintext highlighter-rouge">Elm</code> variable in from <code class="language-plaintext highlighter-rouge">elm.js</code>, now located in the same directory as <code class="language-plaintext highlighter-rouge">app.js</code>, rather than just assuming it is available to use:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/js/app.js</code></strong></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Elm</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./elm</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">elmDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">elm-main</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">Elm</span><span class="p">.</span><span class="nx">Main</span><span class="p">.</span><span class="nx">embed</span><span class="p">(</span><span class="nx">elmDiv</span><span class="p">);</span>
</code></pre></div></div> <p><a href="#display-elm-app-in-phoenix-template">Back to “Display Elm app in Phoenix template”</a></p> </section> <footer class="page__meta"> <p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="/tags/elixir" class="page__taxonomy-item" rel="tag">elixir</a><span class="sep">, </span> <a href="/tags/elm" class="page__taxonomy-item" rel="tag">elm</a><span class="sep">, </span> <a href="/tags/phoenix" class="page__taxonomy-item" rel="tag">phoenix</a> </span> </p> <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-11-01">November 1, 2020</time></p> </footer> <section class="page__share"> <a href="https://twitter.com/intent/tweet?via=paulfioravanti&amp;text=Connecting+Elm+to+Phoenix+1.3%20https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-13%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-13%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-13%2F&amp;title=Connecting%20Elm%20to%20Phoenix%201.3" class="btn btn--reddit" title=" Reddit"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i><span> Reddit</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-13%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> </section> <nav class="pagination"> <a href="/blog/tmuxinator-exercism/" class="pagination--pager" title="Tmuxinator for Exercism ">Previous</a> <a href="/blog/migrate-phoenix-elm-app-rest-graphql/" class="pagination--pager" title="Migrating a Phoenix and Elm app from REST to GraphQL ">Next</a> </nav> </div> <div class="page__comments"> <h4 class="page__comments-title">Comments</h4> <section id="disqus_thread"></section> </div> </article> <div class="page__related"> <h4 class="page__related-title">You May Also Enjoy</h4> <div class="grid__wrapper"> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-05-09/jocasta-helps-obi-wan.png" alt="Jocasta helps Obi-wan in the Jedi Archives"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/coding-test-review-sentia/" rel="permalink">Coding Test Review: Sentia </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-05-09T17:50:00+10:00">May 9, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 16 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">A long SQL query in a database far, far away…. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-05-02/synthwave-3941721_1280.jpg" alt="Synthwave, Retrowave, Synth, Technology, Abstract"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/elmsthetics/" rel="permalink">░▒▓ＥＬＭＳＴＨＥＴＩＣＳ▓▒░ </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-05-02T13:40:00+10:00">May 2, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 45 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Tech moves pretty fast. If you don’t stop and do a side project once in a while, you could miss it. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-02-20/wolf.png" alt="An illustration of The Big Bad Wolf from The Three Little Pigs"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/test-driven-fairy-tale/" rel="permalink">Test-Driven Fairy Tale </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-02-20T21:30:00+11:00">February 20, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 1 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Will the Big Bad Wolf thwart The Three Little Pigs from getting a passing test suite? </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-01-17/georgi.jpg" alt="Georgi keyboard for stenography."> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/steno-numbers-georgi/" rel="permalink">Stenography Numbers on a Georgi </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-01-17T18:15:00+11:00">January 17, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 5 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Adapt your steno habits from using a number bar to a set of thumb cluster number keys. </p> </article> </div> </div> </div> </div> </div> <div class="search-content"> <div class="search-content__inner-wrap"> <form class="search-content__form" onkeydown="return event.key != 'Enter';"> <label class="sr-only" for="search"> Enter your search term... </label> <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..."> </form> <div id="results" class="results"></div> </div> </div> <div id="footer" class="page__footer"> <footer> <div class="page__footer-follow"> <ul class="social-icons"> <li> <a href="/privacy"> <i class="fas fa-user-shield"></i> Privacy Policy </a> </li> <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> </ul> </div> <div class="page__footer-copyright">© 2021 Paul Fioravanti. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> </footer> </div> <script src="/assets/js/main.min.js"></script> <script src="/assets/js/lunr/lunr.min.js"></script> <script src="/assets/js/lunr/lunr-store.js"></script> <script src="/assets/js/lunr/lunr-en.js"></script> <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-109270947-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();</script> <script>var disqus_config=function(){this.page.url="https://www.paulfioravanti.com/blog/elm-phoenix-13/",this.page.identifier="/blog/elm-phoenix-13"};!function(){var t=document,e=t.createElement("script");e.src="https://paulfioravanti.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript> </body> </html>