<!doctype html> <html lang="en" class="no-js"> <head> <meta charset="utf-8"> <title>Connecting Elm to Phoenix 1.4 with webpack | Floor and Varnish</title> <meta name="description" content="Phoenix 1.4 has changed its front end configuration framework from Brunch to webpack."> <meta name="author" content="Paul Fioravanti"> <meta property="article:author" content="Paul Fioravanti"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:site_name" content="Floor and Varnish"> <meta property="og:title" content="Connecting Elm to Phoenix 1.4 with webpack"> <meta property="og:url" content="https://www.paulfioravanti.com/blog/elm-phoenix-14-webpack/"> <meta property="og:description" content="Phoenix 1.4 has changed its front end configuration framework from Brunch to webpack."> <meta property="og:image" content="https://www.paulfioravanti.com/assets/images/2018-07-26/functional_web_wallpaper.jpg"> <meta name="twitter:site" content="@paulfioravanti"> <meta name="twitter:title" content="Connecting Elm to Phoenix 1.4 with webpack"> <meta name="twitter:description" content="Phoenix 1.4 has changed its front end configuration framework from Brunch to webpack."> <meta name="twitter:url" content="https://www.paulfioravanti.com/blog/elm-phoenix-14-webpack/"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://www.paulfioravanti.com/assets/images/2018-07-26/functional_web_wallpaper.jpg"> <meta name="twitter:creator" content="@paulfioravanti"> <meta property="article:published_time" content="2018-07-26T15:20:00+10:00"> <meta property="article:modified_time" content="2019-04-15T13:45:00+10:00"> <link rel="canonical" href="https://www.paulfioravanti.com/blog/elm-phoenix-14-webpack/"> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Paul Fioravanti",
      "url": "https://www.paulfioravanti.com/",
      "sameAs": ["https://twitter.com/paulfioravanti","https://www.linkedin.com/in/paulfioravanti","https://github.com/paulfioravanti","https://stackoverflow.com/users/567863/paul-fioravanti"]
    
  }
</script> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Floor and Varnish Feed"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script>document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/g,"")+" js ";</script> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"> <!--[if IE]><style>.greedy-nav .site-title{padding-right:3em}.greedy-nav button{position:absolute;top:0;right:0;height:100%}</style><![endif]--> </head> <body class="layout--single wide"> <nav class="skip-links"> <h2 class="screen-reader-text">Skip links</h2> <ul> <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li> <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li> <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li> </ul> </nav> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--> <div class="masthead"> <div class="masthead__inner-wrap"> <div class="masthead__menu"> <nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> Floor and Varnish </a> <ul class="visible-links"><li class="masthead__menu-item"> <a href="/about/">About</a> </li></ul> <button class="search__toggle" type="button"> <span class="visually-hidden">Toggle search</span> <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16"> <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path> </svg> </button> <button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">Toggle menu</span> <div class="navicon"></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class="initial-content"> <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2018-07-26/functional_web_wallpaper.jpg');"> <div class="wrapper"> <h1 id="page-title" class="page__title" itemprop="headline"> Connecting Elm to Phoenix 1.4 with webpack </h1> <p class="page__lead">Phoenix 1.4 has changed its front end configuration framework from Brunch to webpack. </p> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-calendar-alt" aria-hidden="true"></i> <time datetime="2018-07-26T15:20:00+10:00">July 26, 2018</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-clock" aria-hidden="true"></i> 5 minute read </span> </p> <a href="https://elixirweekly.net/issues/108" style="text-decoration: none;"> <img src="https://img.shields.io/badge/Elixir%20Weekly-%23108-blueviolet.svg" alt="Elixir Weekly #108"> </a> </div> </div> <div id="main" role="main"> <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <div class="author__avatar"> <a href="/"> <img src="https://s.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee" alt="Paul Fioravanti" itemprop="image"> </a> </div> <div class="author__content"> <a href="/"><h3 class="author__name" itemprop="name">Paul Fioravanti</h3></a> <div class="author__bio" itemprop="description"> <p><img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> code / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> languages <img class="emoji" title=":it:" alt=":it:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f9.png" height="20" width="20"> <img class="emoji" title=":jp:" alt=":jp:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ef-1f1f5.png" height="20" width="20"> / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> mech <img class="emoji" title=":keyboard:" alt=":keyboard:" src="https://github.githubassets.com/images/icons/emoji/unicode/2328.png" height="20" width="20"> / Learning stenography</p> </div> </div> <div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button> <ul class="author__urls social-icons"> <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place"> <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Sydney, Australia</span> </li> <li> <a href="https://www.paulfioravanti.com" itemprop="url"> <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span> </a> </li> <li> <a href="mailto:paul@paulfioravanti.com"> <meta itemprop="email" content="paul@paulfioravanti.com"> <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span> </a> </li> <li> <a href="https://twitter.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span> </a> </li> <li> <a href="https://www.linkedin.com/in/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span> </a> </li> <li> <a href="https://github.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span> </a> </li> <li> <a href="https://stackoverflow.com/users/567863/paul-fioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span> </a> </li> </ul> </div> </div> <div id="bd_embed_signup"> <form action="https://buttondown.email/api/emails/embed-subscribe/paulfioravanti" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.email/paulfioravanti', 'popupwindow')" class="embeddable-buttondown-form"> <label for="bd-email">Get notified of new posts!</label> <input type="email" name="email" id="bd-email" class="email" placeholder="email address"> <input type="hidden" value="1" name="embed"> <div class="clear"> <input type="submit" value="Subscribe" id="bd-embedded-subscribe" class="button"> </div> <p> I send email when I have new content to share. No spam; unsubscribe at any time. <a href="/privacy">Privacy Policy</a> </p> </form> </div> </div> <article class="page" itemscope itemtype="https://schema.org/CreativeWork"> <meta itemprop="headline" content="Connecting Elm to Phoenix 1.4 with webpack"> <meta itemprop="description" content="Phoenix 1.4 has changed its front end configuration framework from Brunch to webpack."> <meta itemprop="datePublished" content="2018-07-26T15:20:00+10:00"> <meta itemprop="dateModified" content="2019-04-15T13:45:00+10:00"> <div class="page__inner-wrap"> <section class="page__content" itemprop="text"> <p>As of version 1.4, <a href="https://phoenixframework.org/">Phoenix</a> has changed its front end configuration framework from <a href="https://brunch.io/">Brunch</a> to <a href="https://webpack.js.org/">webpack</a> version 4 (reasons given in <a href="https://github.com/phoenixframework/phoenix/pull/2779">this pull request</a>). This means that the way to get <a href="http://elm-lang.org/">Elm</a> connected to Phoenix has also changed since I <a href="https://www.paulfioravanti.com/blog/connecting-elm-to-phoenix-1-3/">last wrote about it</a>, so this blog post will re-tread those main steps (read: copy-paste them from the previous blog entry where possible), updating information where relevant.</p> <blockquote> <p>NOTE: Phoenix 1.4 is in beta at the time of this writing, so if it still is at the time of your reading this, and you would like to follow along, you can install Phoenix 1.4 Beta by doing the following:</p> </blockquote> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix archive.uninstall phx_new
mix archive.install https://github.com/phoenixframework/archives/raw/master/1.4-dev/phx_new.ez
</code></pre></div></div> <blockquote> <p>Don’t forget to re-install the latest stable version of Phoenix when you are done experimenting!</p> </blockquote> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix archive.uninstall phx_new
mix archive.install https://github.com/phoenixframework/archives/raw/master/phx_new.ez
</code></pre></div></div> <h2 id="generate-phoenix-app">Generate Phoenix app</h2> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix phx.new phx_elm_webpack
<span class="nb">cd </span>phx_elm_webpack
mix ecto.create
mix phx.server
</code></pre></div></div> <p>Navigate to <a href="http://localhost:4000/">http://localhost:4000/</a> and you should see the familiar Phoenix welcome screen.</p> <p><img src="/assets/images/2018-07-26/welcome-to-phoenix.png" alt="Welcome to Phoenix" title="Welcome to Phoenix" class="img-responsive"></p> <p>No surprises here. Close down the server, and let’s move on.</p> <h2 id="generate-elm-app">Generate Elm app</h2> <p>First, install Elm if you haven’t already:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>elm <span class="nt">--global</span>
</code></pre></div></div> <p>Next, in order to help us generate an Elm app with a default structure and sensible configuration, we’ll use <a href="https://github.com/halfzebra/create-elm-app">Create Elm App</a> (inspired by <a href="https://github.com/facebook/create-react-app">Create React App</a>):</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>create-elm-app <span class="nt">--global</span>
</code></pre></div></div> <p>Generate the new Elm app inside the “front end” of the Phoenix application, which in this case means the <code class="language-plaintext highlighter-rouge">assets/</code> directory:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>assets
create-elm-app elm
</code></pre></div></div> <p>You should now have an <code class="language-plaintext highlighter-rouge">elm</code> folder alongside your <code class="language-plaintext highlighter-rouge">js</code> and <code class="language-plaintext highlighter-rouge">css</code> folders. Let’s make sure it works as we expect:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>elm
elm-app start
</code></pre></div></div> <p>Starting the Elm app should then automatically open a browser window for you at <a href="http://localhost:3000/">http://localhost:3000/</a>, and you should see a message saying that…</p> <p><img src="/assets/images/2018-07-26/elm-app-working.png" alt="Your Elm app is working" title="Your Elm app is working" class="img-responsive"></p> <p>Note that the Elm app is running independently here: it knows nothing about the Phoenix environment that it’s located in, and is happily using assets, like the image that you see, from its own <code class="language-plaintext highlighter-rouge">assets/elm/public/</code> directory.</p> <p>Now that we’ve confirmed that both the Phoenix app and the Elm app work of their own accord, it’s time to connect them together. Close down the Elm server and let’s write some config.</p> <h2 id="connect-elm-to-phoenix">Connect Elm to Phoenix</h2> <p>In order to get webpack to track our new Elm dependencies, we will need the <a href="https://github.com/elm-community/elm-webpack-loader">Elm loader</a> plugin. So, navigate to the <code class="language-plaintext highlighter-rouge">assets/</code> folder and install it:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>elm-webpack-loader
</code></pre></div></div> <p>Now, open up <code class="language-plaintext highlighter-rouge">webpack.config.js</code> in a text editor and add the configuration rule for Elm files underneath the css rule:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/webpack.config.js</code></strong></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">(</span><span class="nx">env</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="c1">// ...</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js$/</span><span class="p">,</span>
        <span class="na">exclude</span><span class="p">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
        <span class="na">use</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">loader</span><span class="p">:</span> <span class="dl">'</span><span class="s1">babel-loader</span><span class="dl">'</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
        <span class="na">use</span><span class="p">:</span> <span class="p">[</span><span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span> <span class="dl">'</span><span class="s1">css-loader</span><span class="dl">'</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">elm$/</span><span class="p">,</span>
        <span class="na">exclude</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">/elm-stuff/</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">/node_modules</span><span class="dl">"</span><span class="p">],</span>
        <span class="na">loader</span><span class="p">:</span> <span class="dl">"</span><span class="s2">elm-webpack-loader</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">debug</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="c1">// NOTE: `warn` option was removed in Elm 0.19.</span>
          <span class="c1">// Re-enable if desired for use in Elm 0.18.</span>
          <span class="c1">// warn: true,</span>
          <span class="na">cwd</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">elm</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div></div> <h2 id="display-elm-app-in-phoenix-template">Display Elm app in Phoenix template</h2> <p>So that we show both Phoenix and Elm working together, let’s keep the default generated Phoenix layout template as-is, and replace the content of the page index template with a <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> tag for the Elm app:</p> <p><strong><code class="language-plaintext highlighter-rouge">lib/phx_elm_webpack/templates/page/index.html.eex</code></strong></p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"elm-main"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div> <p>Next, we’ll target that <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> tag and replace it with the content of the Elm app:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/js/app.js</code></strong></p> <h3 id="elm-018">Elm 0.18</h3> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="k">import</span> <span class="nx">Elm</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../elm/src/Main.elm</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">elmDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">elm-main</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">Elm</span><span class="p">.</span><span class="nx">Main</span><span class="p">.</span><span class="nx">embed</span><span class="p">(</span><span class="nx">elmDiv</span><span class="p">)</span>
</code></pre></div></div> <h3 id="elm-019">Elm 0.19</h3> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Elm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../elm/src/Main.elm</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">elmDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">elm-main</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">Elm</span><span class="p">.</span><span class="nx">Main</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span> <span class="na">node</span><span class="p">:</span> <span class="nx">elmDiv</span> <span class="p">})</span>
</code></pre></div></div> <p>Now, run <code class="language-plaintext highlighter-rouge">mix phx.server</code> again and navigate to <a href="http://localhost:4000">http://localhost:4000</a> to see if we’re in business:</p> <p><img src="/assets/images/2018-07-26/phoenix-elm-broken-image.png" alt="Image broken" title="Image broken" class="img-responsive"></p> <p>Well, we’re pretty much there: we can see that the Elm app is being rendered in the template, but we’ve got a broken image. This is because that image currently lives inside the Elm app at <code class="language-plaintext highlighter-rouge">assets/elm/public/logo.svg</code>, and Phoenix doesn’t know anything about compilation of static image assets within Elm applications: it’s looking for assets under its own <code class="language-plaintext highlighter-rouge">assets/static/</code> directory.</p> <p>The path of least resistance here is, I think, to move all assets to where Phoenix is expecting to find them, and change the Elm code to point to them.</p> <p>So, first, move the logo image into Phoenix’s image assets directory:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>assets/elm/public/logo.svg assets/static/images/logo.svg
</code></pre></div></div> <p>Then, change the Elm code to look for the image in Phoenix (<code class="language-plaintext highlighter-rouge">/images/logo.svg</code>), rather than in Elm (<code class="language-plaintext highlighter-rouge">/logo.svg</code>):</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/elm/src/Main.elm</code></strong></p> <div class="language-elm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="kt">Main</span> <span class="k">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="c1">-- ...</span>

<span class="n">view</span> <span class="p">:</span> <span class="kt">Model</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
    <span class="n">div</span> <span class="p">[]</span>
        <span class="p">[</span> <span class="n">img</span> <span class="p">[</span> <span class="n">src</span> <span class="s">"</span><span class="s2">/images/logo.svg"</span> <span class="p">]</span> <span class="p">[]</span>
        <span class="o">,</span> <span class="n">h1</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"</span><span class="s2">Your Elm App is working!"</span> <span class="p">]</span>
        <span class="p">]</span>
</code></pre></div></div> <p>Now, at <a href="http://localhost:4000/">http://localhost:4000/</a>, you should see the following:</p> <p><img src="/assets/images/2018-07-26/phoenix-elm-working.png" alt="Phoenix and Elm working" title="Phoenix and Elm working" class="img-responsive"></p> <p>At this point, everything is technically working, so you can happily continue your application bootstrapping, but if you need to have the styling on this screen pixel perfect before finishing, read on.</p> <h2 id="tell-webpack-about-elm-app-styling">Tell webpack about Elm app styling</h2> <p>Currently, the Elm app has some styling in <code class="language-plaintext highlighter-rouge">assets/elm/src/main.css</code>, and Phoenix has its styling in <code class="language-plaintext highlighter-rouge">assets/css/app.css</code>. However, if we have a look at the top of <code class="language-plaintext highlighter-rouge">assets/js/app.js</code>, we can see that only the Phoenix CSS is being imported, and hence loaded, by webpack. So, let’s see what happens when we get webpack to load the Elm application’s CSS file as well:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/js/app.js</code></strong></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">css</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../css/app.css</span><span class="dl">"</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">../elm/src/main.css</span><span class="dl">"</span>
</code></pre></div></div> <p>Re-start the app and let’s see what happened…</p> <p><img src="/assets/images/2018-07-26/elm-styles-override-phoenix-styles.png" alt="Elm Styles Override Phoenix Styles" title="Elm Styles Override Phoenix Styles" class="img-responsive"></p> <p>Well, the Elm app styling looks like we would expect, but some of the Elm styles would seem to be overriding the Phoenix styles, so let’s see if we can take the path of least resistance in fixing this (since this is all only temporary anyway…).</p> <p>First, give the Elm logo a HTML <code class="language-plaintext highlighter-rouge">id</code> so we can target styling on it directly:</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/elm/src/Main.elm</code></strong></p> <div class="language-elm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="kt">Main</span> <span class="k">exposing</span> <span class="p">(</span><span class="o">..</span><span class="p">)</span>

<span class="k">import</span> <span class="kt">Html</span> <span class="k">exposing</span> <span class="p">(</span><span class="kt">Html</span><span class="o">,</span> <span class="n">text</span><span class="o">,</span> <span class="n">div</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">img</span><span class="p">)</span>
<span class="k">import</span> <span class="kt">Html</span><span class="o">.</span><span class="kt">Attributes</span> <span class="k">exposing</span> <span class="p">(</span><span class="n">id</span><span class="o">,</span> <span class="n">src</span><span class="p">)</span>

<span class="c1">-- ...</span>

<span class="n">view</span> <span class="p">:</span> <span class="kt">Model</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="n">view</span> <span class="n">model</span> <span class="o">=</span>
    <span class="n">div</span> <span class="p">[]</span>
        <span class="p">[</span> <span class="n">img</span> <span class="p">[</span> <span class="n">src</span> <span class="s">"</span><span class="s2">/images/logo.svg"</span><span class="o">,</span> <span class="n">id</span> <span class="s">"</span><span class="s2">elm-logo"</span> <span class="p">]</span> <span class="p">[]</span>
        <span class="o">,</span> <span class="n">h1</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">"</span><span class="s2">Your Elm App is working!"</span> <span class="p">]</span>
        <span class="p">]</span>
</code></pre></div></div> <p>Then, give the Elm styles some minor tweaks from their defaults…</p> <p><strong><code class="language-plaintext highlighter-rouge">assets/elm/src/main.css</code></strong></p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* ... */</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#293c4b</span><span class="p">;</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'Source Sans Pro'</span><span class="p">,</span> <span class="s2">'Trebuchet MS'</span><span class="p">,</span> <span class="s2">'Lucida Grande'</span><span class="p">,</span> <span class="s2">'Bitstream Vera Sans'</span><span class="p">,</span> <span class="s2">'Helvetica Neue'</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">img</span><span class="nf">#elm-logo</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">20px</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Re-start the app, and…</p> <p><img src="/assets/images/2018-07-26/finished-app.png" alt="Finished App" title="Finished App" class="img-responsive"></p> <p>That looks about right. Now, you can get down to the business of ripping it all out again, and start building out your own Phoenix-and-Elm powered app!</p> </section> <footer class="page__meta"> <p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="/tags/elixir" class="page__taxonomy-item" rel="tag">elixir</a><span class="sep">, </span> <a href="/tags/elm" class="page__taxonomy-item" rel="tag">elm</a><span class="sep">, </span> <a href="/tags/phoenix" class="page__taxonomy-item" rel="tag">phoenix</a> </span> </p> <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-04-15">April 15, 2019</time></p> </footer> <section class="page__share"> <a href="https://twitter.com/intent/tweet?via=paulfioravanti&amp;text=Connecting+Elm+to+Phoenix+1.4+with+webpack%20https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-14-webpack%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-14-webpack%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-14-webpack%2F&amp;title=Connecting%20Elm%20to%20Phoenix%201.4%20with%20webpack" class="btn btn--reddit" title=" Reddit"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i><span> Reddit</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Felm-phoenix-14-webpack%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> </section> <nav class="pagination"> <a href="/blog/runtime-language-switching-elm/" class="pagination--pager" title="Runtime Language Switching in Elm ">Previous</a> <a href="/blog/escape-defaults-control-keyboard-qmk/" class="pagination--pager" title="Escape the defaults and Control your keyboard with QMK ">Next</a> </nav> </div> <div class="page__comments"> <h4 class="page__comments-title">Comments</h4> <section id="disqus_thread"></section> </div> </article> <div class="page__related"> <h4 class="page__related-title">You May Also Enjoy</h4> <div class="grid__wrapper"> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-01-17/georgi.jpg" alt="Georgi keyboard for stenography."> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/steno-numbers-georgi/" rel="permalink">Stenography Numbers on a Georgi </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-01-17T18:15:00+11:00">January 17, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 5 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Adapt your steno habits from using a number bar to a set of thumb cluster number keys. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-01-06/anakin-naboo-battle.png" alt="Anakin Skywalker piloting a Naboo fighter"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/your-code-episode-one/" rel="permalink">Your Code: Episode I - The Phantom Repository </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-01-06T17:25:00+11:00">January 6, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 3 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Every Developer Learns To Program. Every Journey Has A First Step. Every Coding Saga Has A Beginning. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-01-04/roro.jpg" alt="The Ruby on Rails Oceania (RORO) meetup at Airtasker offices"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/organise-meetups/" rel="permalink">Organise a Meetup </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-01-04T10:00:00+11:00">January 4, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 36 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Looking to take your love of meetups to the next level? Try organising! </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2021-01-03/infobar.jpg" alt="Japanese feature phones"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/oi-kochi/" rel="permalink">Oi! Kochi: Japanese Feature Phone-driven Development </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2021-01-03T21:05:00+11:00">January 3, 2021</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 3 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">During Japan’s mobile web infancy, I wanted my little community newsletter to ride the wave of the future. </p> </article> </div> </div> </div> </div> </div> <div class="search-content"> <div class="search-content__inner-wrap"> <form class="search-content__form" onkeydown="return event.key != 'Enter';"> <label class="sr-only" for="search"> Enter your search term... </label> <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..."> </form> <div id="results" class="results"></div> </div> </div> <div id="footer" class="page__footer"> <footer> <div class="page__footer-follow"> <ul class="social-icons"> <li> <a href="/privacy"> <i class="fas fa-user-shield"></i> Privacy Policy </a> </li> <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> </ul> </div> <div class="page__footer-copyright">© 2021 Paul Fioravanti. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> </footer> </div> <script src="/assets/js/main.min.js"></script> <script src="/assets/js/lunr/lunr.min.js"></script> <script src="/assets/js/lunr/lunr-store.js"></script> <script src="/assets/js/lunr/lunr-en.js"></script> <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-109270947-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();</script> <script>var disqus_config=function(){this.page.url="https://www.paulfioravanti.com/blog/elm-phoenix-14-webpack/",this.page.identifier="/blog/elm-phoenix-14-webpack"};!function(){var e=document,t=e.createElement("script");t.src="https://paulfioravanti.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript> </body> </html>