<!doctype html> <html lang="en" class="no-js"> <head> <meta charset="utf-8"> <title>Flexbox Furigana | Floor and Varnish</title> <meta name="description" content="Styling kanji readings is a big subject for such small text."> <meta name="author" content="Paul Fioravanti"> <meta property="article:author" content="Paul Fioravanti"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:site_name" content="Floor and Varnish"> <meta property="og:title" content="Flexbox Furigana"> <meta property="og:url" content="https://www.paulfioravanti.com/blog/flexbox-furigana/"> <meta property="og:description" content="Styling kanji readings is a big subject for such small text."> <meta property="og:image" content="https://www.paulfioravanti.com/assets/images/2022-06-25/menu-with-furigana-header.jpg"> <meta name="twitter:site" content="@paulfioravanti"> <meta name="twitter:title" content="Flexbox Furigana"> <meta name="twitter:description" content="Styling kanji readings is a big subject for such small text."> <meta name="twitter:url" content="https://www.paulfioravanti.com/blog/flexbox-furigana/"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://www.paulfioravanti.com/assets/images/2022-06-25/menu-with-furigana-header.jpg"> <meta name="twitter:creator" content="@paulfioravanti"> <meta property="article:published_time" content="2022-06-25T10:30:00+10:00"> <meta property="article:modified_time" content="2022-06-28T09:00:00+10:00"> <link rel="canonical" href="https://www.paulfioravanti.com/blog/flexbox-furigana/"> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Paul Fioravanti",
      "url": "https://www.paulfioravanti.com/",
      "sameAs": ["https://twitter.com/paulfioravanti","https://www.linkedin.com/in/paulfioravanti","https://github.com/paulfioravanti","https://stackoverflow.com/users/567863/paul-fioravanti"]
    
  }
</script> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Floor and Varnish Feed"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script>document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/g,"")+" js ";</script> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript> </head> <body class="layout--single wide"> <nav class="skip-links"> <ul> <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li> <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li> <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li> </ul> </nav> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--> <div class="masthead"> <div class="masthead__inner-wrap"> <div class="masthead__menu"> <nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> Floor and Varnish </a> <ul class="visible-links"><li class="masthead__menu-item"> <a href="/about/">About</a> </li></ul> <button class="search__toggle" type="button"> <span class="visually-hidden">Toggle search</span> <i class="fas fa-search"></i> </button> <button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">Toggle menu</span> <div class="navicon"></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class="initial-content"> <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('/assets/images/2022-06-25/menu-with-furigana-header.jpg');"> <div class="wrapper"> <h1 id="page-title" class="page__title" itemprop="headline"> Flexbox Furigana </h1> <p class="page__lead">Styling <em>kanji</em> readings is a big subject for such small text. </p> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-calendar-alt" aria-hidden="true"></i> <time datetime="2022-06-25T10:30:00+10:00">June 25, 2022</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-clock" aria-hidden="true"></i> 16 minute read </span> </p> </div> <span class="page__hero-caption">Photo by <a href="https://www.flickr.com/photos/milkway_gdh/">極地狐</a> on <a href="https://www.flickr.com/photos/milkway_gdh/21295392670/">Flickr</a> </span> </div> <div id="main" role="main"> <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <div class="author__avatar"> <a href="/"> <img src="https://s.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee" alt="Paul Fioravanti" itemprop="image"> </a> </div> <div class="author__content"> <a href="/"><h3 class="author__name" itemprop="name">Paul Fioravanti</h3></a> <div class="author__bio" itemprop="description"> <p><img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> code / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> languages <img class="emoji" title=":it:" alt=":it:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f9.png" height="20" width="20"> <img class="emoji" title=":jp:" alt=":jp:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ef-1f1f5.png" height="20" width="20"> / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> mech <img class="emoji" title=":keyboard:" alt=":keyboard:" src="https://github.githubassets.com/images/icons/emoji/unicode/2328.png" height="20" width="20"> / Learning stenography</p> </div> </div> <div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button> <ul class="author__urls social-icons"> <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place"> <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Sydney, Australia</span> </li> <li> <a href="https://www.paulfioravanti.com" itemprop="url"> <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span> </a> </li> <li> <a href="mailto:paul@paulfioravanti.com"> <meta itemprop="email" content="paul@paulfioravanti.com"> <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span> </a> </li> <li> <a href="https://keybase.io/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fas fa-fw fa-key" aria-hidden="true"></i><span class="label">Keybase</span> </a> </li> <li> <a href="https://twitter.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span> </a> </li> <li> <a href="https://www.linkedin.com/in/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span> </a> </li> <li> <a href="https://instagram.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span> </a> </li> <li> <a href="https://github.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span> </a> </li> <li> <a href="https://stackoverflow.com/users/567863/paul-fioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span> </a> </li> <li> <a href="https://www.youtube.com/@paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-youtube" aria-hidden="true"></i><span class="label">YouTube</span> </a> </li> <li> <a href="https://www.strava.com/athletes/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer me"> <i class="fab fa-strava" aria-hidden="true"></i> Strava </a> </li> </ul> </div> </div> <div id="bd_embed_signup"> <form action="https://buttondown.email/api/emails/embed-subscribe/paulfioravanti" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.email/paulfioravanti', 'popupwindow')" class="embeddable-buttondown-form"> <label for="bd-email">Get notified of new posts!</label> <input type="email" name="email" id="bd-email" class="email" placeholder="email address"> <input type="hidden" value="1" name="embed"> <div class="clear"> <input type="submit" value="Subscribe" id="bd-embedded-subscribe" class="button"> </div> <p> I send email when I have new content to share. No spam; unsubscribe at any time. <a href="/privacy">Privacy Policy</a> </p> </form> </div> </div> <article class="page" itemscope itemtype="https://schema.org/CreativeWork"> <meta itemprop="headline" content="Flexbox Furigana"> <meta itemprop="description" content="Styling kanji readings is a big subject for such small text."> <meta itemprop="datePublished" content="2022-06-25T10:30:00+10:00"> <meta itemprop="dateModified" content="2022-06-28T09:00:00+10:00"> <div class="page__inner-wrap"> <section class="page__content" itemprop="text"> <p><em><a href="https://en.wikipedia.org/wiki/Furigana">Furigana</a></em> are annotations used to indicate the Japanese reading, or pronunciation, of Chinese <em><a href="https://en.wikipedia.org/wiki/Kanji">kanji</a></em> characters.</p> <p>As a simple example, let’s say we have a character like this<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>:</p> <div class="japanese-hero"> 車 </div> <p><em>Furigana</em> for the <em>kanji</em>, written with <em><a href="https://en.wikipedia.org/wiki/Hiragana">hiragana</a></em><sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>, can be placed above it<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup>:</p> <div class="japanese-hero" style="padding-top: 20px;"> <ruby lang="ja"> 車 <rp>(</rp> <rt style="ruby-align: center; text-align: center; font-size: medium;"> くるま </rt> <rp>)</rp> </ruby> </div> <p>This is all well and good for Japanese speakers, but what if I wanted English-speakers to be able to read along as well? This can be done by adding the character’s pronunciation using Latin script (<em><a href="https://en.wikipedia.org/wiki/Romanization_of_Japanese">romaji</a></em>) as another <em>furigana</em>-style annotation:</p> <div class="japanese-hero"> <ruby lang="ja" class="japanese"> <ruby lang="ja"> 車 <rp>(</rp> <rt style="ruby-align: center; text-align: center; font-size: medium;"> くるま </rt> <rp>, </rp> </ruby> <rt style="font-style: italic; font-size: medium;"> kuruma </rt> <rp>)</rp> </ruby> </div> <p>Okay, but what does this word actually mean? We could put an English translation to the right of the word, or pile on <em>yet another</em> annotation for the English meaning<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>:</p> <div class="japanese-hero"> <ruby lang="en" class="japanese"> <ruby lang="ja" class="japanese"> <ruby lang="ja"> 車 <rp>(</rp> <rt style="ruby-align: center; text-align: center; font-size: medium;"> くるま </rt> <rp>, </rp> </ruby> <rt style="font-style: italic; font-size: medium;"> kuruma </rt> <rp>, </rp> </ruby> <rt lang="en" style="font-weight: bold; text-align: center;"> car </rt> <rp>) </rp> </ruby> </div> <p>For single words, this “full-suite” of annotations could be considered acceptable, but for complete sentences, where the objective is to have a non-Japanese speaker read along <ruby lang="ja">phonetically<rp>(</rp><rt style="">fuh·neh·ti·kuh·lee</rt><rp>)</rp></ruby>, I think any translation needs its own dedicated section.</p> <p>I did exactly this in a previous blog post, <em><a href="https://www.paulfioravanti.com/blog/persons-character/">A Person’s Character (人という字は)</a></em>, where I wanted to show the <ruby lang="ja">pronunciation<rp>(</rp><rt style="">/pɹəˌnʌn.siˈeɪ.ʃən/</rt><rp>)</rp></ruby> and meaning of some lines of dialogue from the television drama <em><a href="https://en.wikipedia.org/wiki/Kinpachi-sensei">Kinpachi-sensei</a></em>. The intention was to enable English speakers to follow the Japanese dialogue using the <em>romaji</em> annotations, and <em>then</em> read the translation:</p> <blockquote> <div class="japanese-with-furigana-romaji"> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">君<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">きみ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> Kimi</rt> </ruby> <ruby lang="ja" class="japanese"> たち <rt class="romaji" style="font-size: 50%"> tachi</rt> </ruby> <ruby lang="ja" class="japanese"> いい <rt class="romaji" style="font-size: 50%"> ii</rt> </ruby> <ruby lang="ja" class="japanese"> です <rt class="romaji" style="font-size: 50%"> desu</rt> </ruby> <ruby lang="ja" class="japanese"> か <rt class="romaji" style="font-size: 50%"> ka~.</rt> </ruby> <ruby lang="ja" class="japanese"> 〜。 </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> Hito</rt> </ruby> <ruby lang="ja" class="japanese"> と <rt class="romaji" style="font-size: 50%"> to</rt> </ruby> <ruby lang="ja" class="japanese"> いう <rt class="romaji" style="font-size: 50%"> iu</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">字<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">じ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> ji</rt> </ruby> <ruby lang="ja" class="japanese"> は <rt class="romaji" style="font-size: 50%"> wa</rt> </ruby> <ruby lang="ja" class="japanese"> ねぇ <rt class="romaji" style="font-size: 50%"> nē,</rt> </ruby> <ruby lang="ja" class="japanese"> 、 </ruby> <ruby lang="ja" class="japanese"> ひとり <rt class="romaji" style="font-size: 50%"> hitori</rt> </ruby> <ruby lang="ja" class="japanese"> の <rt class="romaji" style="font-size: 50%"> no</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">「人」<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:8px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> "hito"</rt> </ruby> <ruby lang="ja" class="japanese"> が <rt class="romaji" style="font-size: 50%"> ga</rt> </ruby> <ruby lang="ja" class="japanese"> もう <rt class="romaji" style="font-size: 50%"> mō</rt> </ruby> <ruby lang="ja" class="japanese"> ひとり <rt class="romaji" style="font-size: 50%"> hitori</rt> </ruby> <ruby lang="ja" class="japanese"> の <rt class="romaji" style="font-size: 50%"> no</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">「人」<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:8px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> "hito"</rt> </ruby> <ruby lang="ja" class="japanese"> を <rt class="romaji" style="font-size: 50%"> o</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">支えて<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:3px;">ささ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> sasaete</rt> </ruby> <ruby lang="ja" class="japanese"> いる <rt class="romaji" style="font-size: 50%"> iru</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">字<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">じ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> ji</rt> </ruby> <ruby lang="ja" class="japanese"> です <rt class="romaji" style="font-size: 50%"> desu.</rt> </ruby> <ruby lang="ja" class="japanese"> 。 </ruby> <ruby lang="ja" class="japanese"> つまり <rt class="romaji" style="font-size: 50%"> Tsumari,</rt> </ruby> <ruby lang="ja" class="japanese"> 、 </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> hito</rt> </ruby> <ruby lang="ja" class="japanese"> と <rt class="romaji" style="font-size: 50%"> to</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> hito</rt> </ruby> <ruby lang="ja" class="japanese"> が <rt class="romaji" style="font-size: 50%"> ga</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-compound-word"> <ruby lang="ja" class="japanese"> <ruby lang="ja">支え<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:3px;">ささ</rt><rp>)</rp></ruby> <rt class="romaji" style="font-size: 50%"> sasae</rt> </ruby> <ruby lang="ja" class="japanese"> <ruby lang="ja">合ってる<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:8px;">あ</rt><rp>)</rp></ruby> <rt class="romaji" style="font-size: 50%"> atteru</rt> </ruby> </span> </ruby> <ruby lang="ja" class="japanese"> から <rt class="romaji" style="font-size: 50%"> kara</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> hito</rt> </ruby> <ruby lang="ja" class="japanese"> なん <rt class="romaji" style="font-size: 50%"> nan</rt> </ruby> <ruby lang="ja" class="japanese"> です <rt class="romaji" style="font-size: 50%"> desu.</rt> </ruby> <ruby lang="ja" class="japanese"> 。 </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> Hito</rt> </ruby> <ruby lang="ja" class="japanese"> は <rt class="romaji" style="font-size: 50%"> wa</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> hito</rt> </ruby> <ruby lang="ja" class="japanese"> に <rt class="romaji" style="font-size: 50%"> ni</rt> </ruby> <ruby lang="ja" class="japanese"> よって <rt class="romaji" style="font-size: 50%"> yotte</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">支えられ<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:3px;">ささ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> sasaerare,</rt> </ruby> <ruby lang="ja" class="japanese"> 、 </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:4px;">ひと</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> hito</rt> </ruby> <ruby lang="ja" class="japanese"> の <rt class="romaji" style="font-size: 50%"> no</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">間<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:5px;">あいだ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> aida</rt> </ruby> <ruby lang="ja" class="japanese"> で <rt class="romaji" style="font-size: 50%"> de</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">人間<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:6px;">にんげん</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> ningen</rt> </ruby> <ruby lang="ja" class="japanese"> として <rt class="romaji" style="font-size: 50%"> toshite</rt> </ruby> <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">磨かれて<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:4px;">みが</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> migakarete</rt> </ruby> <ruby lang="ja" class="japanese"> いくん <rt class="romaji" style="font-size: 50%"> ikun</rt> </ruby> <ruby lang="ja" class="japanese"> です <rt class="romaji" style="font-size: 50%"> desu.</rt> </ruby> <ruby lang="ja" class="japanese"> 。 </ruby> </div> <br> Can I have your attention, please. So, the character for "person" consists of one person holding up and sustaining another person. In other words, it is a "person" precisely <em>because</em> a person and another person are supporting each other. A person gets support from other people and their community, and through that support, grows and develops as a human. </blockquote> <p>Figuring out the idiosyncrasies of how to mark-up and display all of these annotations in the way I wanted using <a href="https://en.wikipedia.org/wiki/HTML">HTML</a> and <a href="https://en.wikipedia.org/wiki/CSS">CSS</a>, and then developing a way to extract that logic out into functionality that could be shared across multiple <a href="https://daringfireball.net/projects/markdown/">Markdown</a>-based blog posts using <a href="https://shopify.github.io/liquid/">Liquid</a>, took me far more time than I expected, and became the catalyst for writing this particular blog post.</p> <p>So, the following is my <a href="https://en.wiktionary.org/wiki/brain_dump">brain dump</a> on what I learned about using annotations on the web.</p> <h2 id="annotation-markup">Annotation Markup</h2> <div class="centered-image" style="width: 60%;"> <figure style="margin-bottom: 0; margin-top: 20px;"> <img src="/assets/images/2022-06-25/Furigana_example.png" alt="Japanese word meaning 'furigana' with above smaller orange phonetic hiragana called 'furigana' helping to pronounce it."> </figure> <figcaption style="margin-bottom: 0.75em;"> Image by Kang Seonghoon, Public domain, via <a href="https://commons.wikimedia.org/wiki/File:Furigana_example.svg"> Wikimedia Commons </a> </figcaption> </div> <p><em>Furigana</em> is a type of <a href="https://en.wikipedia.org/wiki/Ruby_character">Ruby character</a> annotation<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup>, and is marked up in HTML using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ruby"><code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code></a> tag.</p> <p>Searching the internet for how to mark-up <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> elements leads to a significant amount of conflicting information. The <a href="https://www.w3.org/TR/2001/REC-ruby-20010531/Overview.html.utf-8">W3 Ruby Annotation</a> document mentions a selection of markup tags that can appear inside a <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tag:</p> <ul> <li> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/rt"><code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code></a>: ruby text (the annotation)</li> <li> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/rp"><code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code></a>: ruby parenthesis (for when a browser does not support ruby annotations and the ruby text gets rendered inline)</li> <li> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/rb"><code class="language-plaintext highlighter-rouge">&lt;rb&gt;</code></a>: ruby base (the text that is being annotated)</li> <li> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/rtc"><code class="language-plaintext highlighter-rouge">&lt;rtc&gt;</code></a>: ruby text container (a container for <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> elements when markup is “complex”)</li> <li> <code class="language-plaintext highlighter-rouge">&lt;rbc&gt;</code>: ruby base container (a container for <code class="language-plaintext highlighter-rouge">&lt;rb&gt;</code> elements when markup is “complex”)</li> </ul> <p>Each of the tag links in the list above is from the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML">Mozilla HTML documentation</a>, a trustworthy source for this kind of information (in my opinion), and they say that the <code class="language-plaintext highlighter-rouge">&lt;rb&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;rtc&gt;</code>, and <code class="language-plaintext highlighter-rouge">&lt;rbc&gt;</code> tags are <a href="https://en.wikipedia.org/wiki/Deprecation">deprecated</a>, and should be avoided. In order to future-proof <em>furigana</em> annotations, it would seem that only three tags should be used: container <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags, along with child <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> tags.</p> <p>So, for the “car” <em>kanji</em> from the example above, <ruby lang="ja">車<rp>(</rp><rt style="">くるま</rt><rp>)</rp></ruby>, the markup could look like the following:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
  車
  <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;rt&gt;</span>くるま<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <blockquote> <p>What are those <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> tags for? In the event that a browser does not support ruby annotations, the code above will display as:</p> <div class="japanese-hero" style="margin-top: -20px; font-size: xx-large;"> 車(くるま) </div> <figure style=" float: right; margin-bottom: 0; margin-left: 10px; margin-top: 10px; width: 40%; "> <img src="/assets/images/2022-06-25/browser-dev-tools.jpg" alt="Ruby &lt;rt&gt; tag base CSS styles in Chrome dev tools"> </figure> <p>I could not find any built-in functionality that would force a modern browser to “pretend” it does not support annotations, but I was able to follow the <a href="https://www.w3.org/TR/css-ruby-1/#default-inline">Inlining Ruby Annotations</a> section of <a href="https://www.w3.org/TR/css-ruby-1/">CSS Ruby Annotation Layout Module</a>, and add styling via the browser developer tools to achieve the desired display behaviour:</p> <div class="language-css highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nt">rp</span><span class="o">,</span> <span class="nt">rt</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">inline</span><span class="p">;</span>
  <span class="nl">white-space</span><span class="p">:</span> <span class="nb">inherit</span><span class="p">;</span>
  <span class="nl">font</span><span class="p">:</span> <span class="nb">inherit</span><span class="p">;</span>
  <span class="nl">text-emphasis</span><span class="p">:</span> <span class="nb">inherit</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> </div> </blockquote> <p>Given that the <a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-ruby-element">HTML spec for the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> element</a> says that a <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tag can contain “one or more <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> elements”, you may be forgiven for thinking that adding the extra <em>romaji</em> annotation would be a case of perhaps appending it beneath the <em>furigana</em>:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
  車
  <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;rt&gt;</span>くるま<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;rp&gt;</span>, <span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;rt&gt;</span>kuruma<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero" style="padding-top: 40px;"> <ruby lang="ja"> 車 <rp>(</rp> <rt>くるま</rt> <rp>, </rp> <rt>kuruma</rt> <rp>)</rp> </ruby> </div> <p>Not great. We can, however, rearrange the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> child elements, and leverage CSS <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a> styling, to exhert more control over the visuals (we will keep styling <a href="https://www.w3schools.com/html/html_css.asp">inline</a> for demonstration purposes moving forward):</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column-reverse;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;rt&gt;</span>kuruma<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;rp&gt;</span>, <span class="nt">&lt;/rp&gt;</span>
  車
  <span class="nt">&lt;rt&gt;</span>くるま<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style=" display: inline-flex; flex-direction: column-reverse; "> <rp>(</rp> <rt>kuruma</rt> <rp>, </rp> 車 <rt>くるま</rt> <rp>)</rp> </ruby> </div> <p>This displays in a similar way to the initial example at the beginning of the post (though the default gap between the <em>kanji</em> and <em>furigana</em> is a bit concerning…). However, I think the meaning behind the child elements of the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> parent tag have become muddled.</p> <p>What is annotating what? Is 車 annotating <em>kuruma</em>, along with くるま annotating 車? Technically, it seems these semantics are valid, but is there is another way to communicate the desired annotations via markup?</p> <blockquote> <p>Note, also, that we have headed into exploitation territory for the meaning of the <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> tag to make sure that we get <strong>車(くるま, kuruma)</strong> displayed when annotations are not supported (commas are not parentheses, after all). I do not currently know of a “better” way to mark this up to allow for a similar kind of display.</p> </blockquote> <p>The code examples in the <a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-ruby-element">HTML spec for the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> element</a> show that “a nested <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> element” can be used for inner annotations. In our case, this could mean that the markup should indicate that:</p> <ul> <li>くるま annotates 車 (one <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> inner nested element)</li> <li> <em>kuruma</em> annotates the <ruby lang="ja">車<rp>(</rp><rt style="">くるま</rt><rp>)</rp></ruby> compound (another <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> outer nesting element)</li> </ul> <p>Let’s see how this could look in markup:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    車
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>くるま<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>kuruma<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 車 <rp>(</rp> <rt>くるま</rt> <rp>)</rp> </ruby> <rt>kuruma</rt> </ruby> </div> <p>Looks acceptable to me, and I think the meaning of the markup is conveyed in a clearer way.</p> <blockquote> <p>Nesting <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags like this means we have to give up the ability to display the <em>furigana</em> and <em>romaji</em> together [<strong>車(くるま, kuruma)</strong>], when annotations are not supported. But, I am prepared to accept this compromise because the fallback display looks good enough for the rare times it will probably ever be viewed:</p> <div class="japanese-hero" style="font-size: xx-large;"> <div>車(くるま)</div> <div>kuruma</div> </div> </blockquote> <p>Before concluding that we have the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> markup and styling to use as a foundation to build with, let’s test it with a few other <em>kanji</em> scenarios.</p> <h2 id="single-word-multiple-kanji">Single Word, Multiple <em>Kanji</em> </h2> <p>Not every word in Japanese can be written with a single <em>kanji</em>; many require multiple <em>kanji</em> together in a compound. So, let’s test the current markup’s display of <em>kanji</em> compounds by changing the “car” into an “automobile”:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    自動車
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>じどうしゃ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>jidōsha<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 自動車 <rp>(</rp> <rt>じどうしゃ</rt> <rp>)</rp> </ruby> <rt>jidōsha</rt> </ruby> </div> <p>This looks like it displays as expected. However, pedanticism is going to get the best of me here: even though the <em>furigana</em> is correct for the entire word, they <em>don’t quite</em> line up perfectly above the individual characters they are annotating the reading for.</p> <p>Let’s see if we can fix that by adding more <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code>/<code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> tag sets:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    自
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>じ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    動
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>どう<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    車
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>しゃ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>
    jidōsha
  <span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 自 <rp>(</rp> <rt>じ</rt> <rp>)</rp> 動 <rp>(</rp> <rt>どう</rt> <rp>)</rp> 車 <rp>(</rp> <rt>しゃ</rt> <rp>)</rp> </ruby> <rt> jidōsha </rt> </ruby> </div> <p>Ah, much better! The difference may be minor, but I think it’s important!</p> <blockquote> <p>Doing this, unfortunately, “breaks” the <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> fallback display even more, as the <em>furigana</em> readings are now displayed broken down not by full word, but by character:</p> <div class="japanese-hero" style="font-size: xx-large;"> <div>自 (じ) 動 (どう) 車 (しゃ)</div> <div>jidōsha</div> </div> <p>At this point, I think attempting to handle the fallback display gracefully is going to be prioritised to a distant second compared to getting the <em>furigana</em> displaying well for “normal” modern browser usage.</p> </blockquote> <h2 id="single-word-alternating-kanji-and-kana">Single Word, Alternating <em>Kanji</em> and <em>Kana</em> </h2> <p><a href="https://www.wasabi-jpn.com/japanese-grammar/japanese-compound-verbs/">Compound verbs</a> in Japanese are a good example of words that alternate between <em>kanji</em> and <em><a href="https://en.wikipedia.org/wiki/Kana">kana</a></em> in their construction. For example, in the annotations for the word <em>norikomu</em> (乗り込む), meaning “to get into (a vehicle)”, I would expect there to be <em>furigana</em> over 乗 and 込, but not over り or む. As for the <em>romaji</em>, I think a single annotation under the word would suffice.</p> <p>Let’s see if we can re-use the code from the <em>kanji</em> compound to achieve the effect we want:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    乗
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>の<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    り
    込
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>こ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    む
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>
    norikomu
  <span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt>の</rt> <rp>)</rp> り 込 <rp>(</rp> <rt>こ</rt> <rp>)</rp> む </ruby> <rt> norikomu </rt> </ruby> </div> <p>Hmm, not quite right: that second <em>furigana</em> positioning is incorrect, and there is an awkward space between 乗り and 込む. Perhaps each half of this word needs to be its own <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> element? Let’s give that a try:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    乗
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>の<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    り
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    込
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>こ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    む
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>norikomu<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt>の</rt> <rp>)</rp> り </ruby> <ruby lang="ja"> 込 <rp>(</rp> <rt>こ</rt> <rp>)</rp> む </ruby> <rt>norikomu</rt> </ruby> </div> <p>The <em>furigana</em> positioning is fixed, but since we now have three child elements under the <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tag, the <code class="language-plaintext highlighter-rouge">flex-direction: column</code> styling is displaying them all vertically, which is not the result we want.</p> <p>In order to get them to display as one set, we will need to wrap a container around the 乗り and 込む <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags. Yet another <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tag seems like it could be overkill here, so, instead, let’s try a plain old <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span"><code class="language-plaintext highlighter-rouge">&lt;span&gt;</code></a> tag, and give it some Flexbox styling as well:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"display: inline-flex;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
      乗
      <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
      <span class="nt">&lt;rt&gt;</span>の<span class="nt">&lt;/rt&gt;</span>
      <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
      り
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
      込
      <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
      <span class="nt">&lt;rt&gt;</span>こ<span class="nt">&lt;/rt&gt;</span>
      <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
      む
    <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;rt&gt;</span>norikomu<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <span style="display: inline-flex;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt>の</rt> <rp>)</rp> り </ruby> <ruby lang="ja"> 込 <rp>(</rp> <rt>こ</rt> <rp>)</rp> む </ruby> </span> <rt>norikomu</rt> </ruby> </div> <p>Looks good to me! If we <em>did</em> want to split the <em>romaji</em>, so the annotation was under each part of the word, we have the option of changing the tag nesting around to achieve that effect:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"display: inline-flex;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
      乗
      <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
      <span class="nt">&lt;rt&gt;</span>の<span class="nt">&lt;/rt&gt;</span>
      <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
      り
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="nt">&lt;rt&gt;</span>nori<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
      込
      <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
      <span class="nt">&lt;rt&gt;</span>こ<span class="nt">&lt;/rt&gt;</span>
      <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
      む
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="nt">&lt;rt&gt;</span>komu<span class="nt">&lt;/rt&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
<span class="nt">&lt;/span&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <span style="display: inline-flex; justify-content: center;"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt>の</rt> <rp>)</rp> り </ruby> <rt>nori</rt> </ruby> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 込 <rp>(</rp> <rt>こ</rt> <rp>)</rp> む </ruby> <rt>komu</rt> </ruby> </span> </div> <p>Great! We now know there are options around the display for <em>romaji</em>, for potential readability and/or aesthetic reasons.</p> <h2 id="styled-furigana">Styled <em>Furigana</em> </h2> <p>Speaking of aesthetics, does <em>furigana</em> still display as expected if the CSS <code class="language-plaintext highlighter-rouge">font-style</code> changes, like how everything gets italicised on this page when the content is within <code class="language-plaintext highlighter-rouge">&lt;blockquote&gt;</code> tags? Let’s find out with the phrase <ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">自<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:0;">じ</rt><rp>)</rp></ruby> <ruby lang="ja">動<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:0;">どう</rt><rp>)</rp></ruby> <ruby lang="ja">車<rp>(</rp><rt style="ruby-align: center; text-align: center; font-size: 50%; padding-left:0;">しゃ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> jidōsha</rt> </ruby><ruby lang="ja" class="japanese"> に <rt class="romaji" style="font-size: 50%"> ni</rt> </ruby><ruby lang="ja" class="japanese"> <span class="japanese-single-word"> <ruby lang="ja">乗り<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:5px;">の</rt><rp>)</rp></ruby> <ruby lang="ja">込む<rp>(</rp><rt style="ruby-align: start; text-align: left; font-size: 50%; padding-left:7px;">こ</rt><rp>)</rp></ruby> </span> <rt class="romaji" style="font-size: 50%"> norikomu</rt> </ruby> (“to get into the automobile”):</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;blockquote&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"align-items: baseline; display: inline-flex;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
        自
        <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
        <span class="nt">&lt;rt&gt;</span>じ<span class="nt">&lt;/rt&gt;</span>
        <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
        動
        <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
        <span class="nt">&lt;rt&gt;</span>どう<span class="nt">&lt;/rt&gt;</span>
        <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
        車
        <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
        <span class="nt">&lt;rt&gt;</span>しゃ<span class="nt">&lt;/rt&gt;</span>
        <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
      <span class="nt">&lt;/ruby&gt;</span>
      <span class="nt">&lt;rt&gt;</span>jidōsha<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
      に
      <span class="nt">&lt;rt&gt;</span>ni<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"display: inline-flex;"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
          乗
          <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
          <span class="nt">&lt;rt&gt;</span>の<span class="nt">&lt;/rt&gt;</span>
          <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
          り
        <span class="nt">&lt;/ruby&gt;</span>
        <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
          込
          <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
          <span class="nt">&lt;rt&gt;</span>こ<span class="nt">&lt;/rt&gt;</span>
          <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
          む
        <span class="nt">&lt;/ruby&gt;</span>
      <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;rt&gt;</span>norikomu<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/blockquote&gt;</span>
</code></pre></div></div> <blockquote> <div class="japanese-hero"> <div style="align-items: baseline; display: inline-flex;"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 自 <rp>(</rp> <rt>じ</rt> <rp>)</rp> 動 <rp>(</rp> <rt>どう</rt> <rp>)</rp> 車 <rp>(</rp> <rt>しゃ</rt> <rp>)</rp> </ruby> <rt>jidōsha</rt> </ruby> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> に <rt>ni</rt> </ruby> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <span style="display: inline-flex;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt>の</rt> <rp>)</rp> り </ruby> <ruby lang="ja"> 込 <rp>(</rp> <rt>こ</rt> <rp>)</rp> む </ruby> </span> <rt>norikomu</rt> </ruby> </div> </div> </blockquote> <p>Well, it seems that annotations do not really understand italics; they look a tiny bit off, don’t they? It would be nice to be able to nudge them a bit to the right on an individual character basis.</p> <p>Luckily, this is a simple matter of just adding in some <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-align"><code class="language-plaintext highlighter-rouge">text-align</code></a> styling in the <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> tags:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;blockquote&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"..."</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"..."</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
        自
        <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
        <span class="nt">&lt;rt</span> <span class="na">style=</span><span class="s">"text-align: right;"</span><span class="nt">&gt;</span>じ<span class="nt">&lt;/rt&gt;</span>
        <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
      <span class="nt">&lt;/ruby&gt;</span>
      <span class="nt">&lt;rt&gt;</span>jidōsha<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;/ruby&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/blockquote&gt;</span>
</code></pre></div></div> <blockquote> <div class="japanese-hero"> <div style="align-items: baseline; display: inline-flex;"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> <span> 自 </span> <rp>(</rp> <rt style="text-align: right;">じ</rt> <rp>)</rp> <span> 動 </span> <rp>(</rp> <rt style="text-align: right;">どう</rt> <rp>)</rp> <span> 車 </span> <rp>(</rp> <rt style="text-align: right;">しゃ</rt> <rp>)</rp> </ruby> <rt>jidōsha</rt> </ruby> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> に <rt>ni</rt> </ruby> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <span style="display: inline-flex;"> <ruby lang="ja"> 乗 <rp>(</rp> <rt style="text-align: right;">の</rt> <rp>)</rp> り </ruby> <ruby lang="ja"> 込 <rp>(</rp> <rt style="text-align: right;">こ</rt> <rp>)</rp> む </ruby> </span> <rt>norikomu</rt> </ruby> </div> </div> </blockquote> <p>This looks a tiny bit better, though it seems to be more effective for single character <em>furigana</em> than those for compound characters. Pushing the <em>furigana</em> any further to the right would involve adding some <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding-left"><code class="language-plaintext highlighter-rouge">padding-left</code></a> attributes to the <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> tag (which could push the <em>kanji</em> into places you may not want), so feel free to experiment on getting the alignment just right for your tastes.</p> <p>Finally, let’s just confirm the markup works for some exceptional circumstances.</p> <h2 id="long-and-short-furigana">Long and Short <em>Furigana</em> </h2> <p>There are some words in Japanese where up to five syllables can be represented by a single <em>kanji</em>. Let’s use the markup with <em>uketamawaru</em> a word that fits these conditions, and means “to be told” or “to receive (an order)”:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    承
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>うけたまわ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    る
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>uketamawaru<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 承 <rp>(</rp> <rt>うけたまわ</rt> <rp>)</rp> る </ruby> <rt>uketamawaru</rt> </ruby> </div> <p>I think this display is <em>okay</em>, given the awkwardness of the <em>furigana</em> to <em>kanji</em> ratio. But, that gap between 承 and る just seems too big to me, and makes me wonder whether allowing for more flexibility in the size of the <em>furigana</em> annotation would make it less unwieldy.</p> <p>Let’s see what happens if we give the <em>furigana</em> a smaller absolute CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-size"><code class="language-plaintext highlighter-rouge">font-size</code></a> value:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    承
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt</span> <span class="na">style=</span><span class="s">"font-size: small;"</span><span class="nt">&gt;</span>うけたまわ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
    る
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>uketamawaru<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 承 <rp>(</rp> <rt style="font-size: small;">うけたまわ</rt> <rp>)</rp> る </ruby> <rt>uketamawaru</rt> </ruby> </div> <p>Much better, I think, and it can be adjusted to preference on a per-character basis.</p> <p>Now, what about the opposite scenario, when there are more <em>kanji</em> than <em>furigana</em> characters? This will only really happen with so-called <a href="https://en.wikipedia.org/wiki/Kanji#Special_readings">Special Readings</a>, which occur frequently with geographical or human names. So, let’s try the markup with a good example of this, the surname <em>Hozumi</em>:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span> <span class="na">style=</span><span class="s">"display: inline-flex; flex-direction: column;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ruby</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
    八月一日
    <span class="nt">&lt;rp&gt;</span>(<span class="nt">&lt;/rp&gt;</span>
    <span class="nt">&lt;rt&gt;</span>ほずみ<span class="nt">&lt;/rt&gt;</span>
    <span class="nt">&lt;rp&gt;</span>)<span class="nt">&lt;/rp&gt;</span>
  <span class="nt">&lt;/ruby&gt;</span>
  <span class="nt">&lt;rt&gt;</span>Hozumi<span class="nt">&lt;/rt&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <div class="japanese-hero"> <ruby lang="ja" style="display: inline-flex; flex-direction: column;"> <ruby lang="ja"> 八月一日 <rp>(</rp> <rt>ほずみ</rt> <rp>)</rp> </ruby> <rt>Hozumi</rt> </ruby> </div> <p>I think this display of ほずみ<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup> looks fine. The spacing of the <em>furigana</em> may look a bit strange, but since there is no correlation between the annotation and the pronunciation of each individual <em>kanji</em>, having them spread out evenly across the top of the word, or center-aligned, is probably the most logical way to display them.</p> <h2 id="markup-reuse">Markup Reuse</h2> <p>As you can see from the chunky markup blocks above, annotations can take up a lot of coding space. Personally, I do not want to have to manually write <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags every time I want to insert a Japanese word with any kind of annotation into my blog posts, so I wanted a way to reuse that markup.</p> <p><a href="https://jekyllrb.com/">Jekyll</a> is the engine that currently powers this blog, and it allows the usage of <a href="https://shopify.github.io/liquid/">Liquid</a>, a templating language, which has enabled me to put <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> code into functions that take parameters to fine-tune how annotations should display. These functions are littered throughout the <a href="https://raw.githubusercontent.com/paulfioravanti/paulfioravanti.github.io/release/_posts/2022-06-25-flexbox-furigana.md">code for this blog post</a>, as well as other Japanese language-related posts, and fall into two main groups.</p> <h3 id="basic-ruby-tags">Basic Ruby Tags</h3> <p>These are functions that wrap around <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags for purposes of general annotation, and are not specific to Japanese (though they can certainly be used that way). Some examples used in this blog post that you may have noticed are:</p> <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>ruby.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"phonetically"</span><span class="w"> </span><span class="na">annotation</span><span class="o">=</span><span class="s2">"fuh·neh·ti·kuh·lee"</span><span class="w"> </span><span class="cp">%}</span>
<span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>ruby.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"pronunciation"</span><span class="w"> </span><span class="na">annotation</span><span class="o">=</span><span class="s2">"/pɹəˌnʌn.siˈeɪ.ʃən/"</span><span class="w"> </span><span class="cp">%}</span>
<span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>ruby.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"車"</span><span class="w"> </span><span class="na">annotation</span><span class="o">=</span><span class="s2">"くるま"</span><span class="w"> </span><span class="cp">%}</span>
</code></pre></div></div> <h3 id="ruby-tags-for-japanese">Ruby Tags for Japanese</h3> <p>There are also functions that take in parameters which allow all the fine-tuning customisations to <em>furigana</em> and <em>romaji</em> we have seen in the examples above, and are hence specific for use with Japanese. Under the hood, they all leverage the <code class="language-plaintext highlighter-rouge">{% include ruby.html %}</code> function. Some examples used in this post are:</p> <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>japanese.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"自,動,車"</span><span class="w">
                         </span><span class="na">furigana</span><span class="o">=</span><span class="s2">"じ,どう,しゃ"</span><span class="w">
                         </span><span class="na">romaji</span><span class="o">=</span><span class="s2">"jidōsha"</span><span class="w"> </span><span class="cp">%}</span>
<span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>japanese.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"に"</span><span class="w"> </span><span class="na">romaji</span><span class="o">=</span><span class="s2">"ni"</span><span class="w"> </span><span class="cp">%}</span>
<span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>japanese.html<span class="w"> </span><span class="na">word</span><span class="o">=</span><span class="s2">"乗り,込む"</span><span class="w">
                         </span><span class="na">furigana</span><span class="o">=</span><span class="s2">"の,こ"</span><span class="w">
                         </span><span class="na">romaji</span><span class="o">=</span><span class="s2">"norikomu"</span><span class="w">
                         </span><span class="na">furigana-align</span><span class="o">=</span><span class="s2">"left"</span><span class="w">
                         </span><span class="na">furigana-left-padding</span><span class="o">=</span><span class="s2">"5px,7px"</span><span class="w"> </span><span class="cp">%}</span>
</code></pre></div></div> <p>Going through the details of these functions is something I will leave up to the interested reader<sup id="fnref:7" role="doc-noteref"><a href="#fn:7" class="footnote" rel="footnote">7</a></sup>. You can find all the code in the <a href="https://github.com/paulfioravanti/paulfioravanti.github.io/tree/release/_includes"><code class="language-plaintext highlighter-rouge">_includes/</code> directory</a> of this blog’s codebase.</p> <h2 id="much-ado-about-annotations">Much Ado About Annotations</h2> <p>For such small text, the coding, display, debugging, and <a href="https://en.wikipedia.org/wiki/Code_refactoring">refactoring</a> of <em>furigana</em> has taken up a significant amount of my time and brain space. However, I still do not <em>really</em> know if I am doing it “right”.</p> <p>The developers over at the <a href="https://japanese.stackexchange.com/">Japanese Language Stack Exchange</a>, whom I assume are experts at all things Japanese for the web, would seem to eschew <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> tags for <code class="language-plaintext highlighter-rouge">&lt;span&gt;</code> tags in order to represent <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;rb&gt;</code> values for their cool <em>furigana</em> pop-ups:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ruby</span> <span class="na">title=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"ruby-rp popups"</span> <span class="na">style=</span><span class="s">"..."</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"rb"</span><span class="nt">&gt;</span>終幕<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"rt"</span> <span class="na">style=</span><span class="s">"..."</span><span class="nt">&gt;</span>さいご<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/ruby&gt;</span>
</code></pre></div></div> <p>However, <a href="https://www3.nhk.or.jp/news/easy/">NHK Easy News</a> <em>does</em> use <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;rt&gt;</code> tags in the same way as the examples in this post. However, they, too, have opted to not use <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code> tags (perhaps they considered them to be legacy/unnecessary…?).</p> <p><a href="https://news.yahoo.co.jp/">Yahoo News Japan</a> does not support <em>furigana</em> annotations at all, preferring instead to display <code class="language-plaintext highlighter-rouge">&lt;rp&gt;</code>-style parenthesised <em>kanji</em> readings inline (perhaps because they are a bit <a href="https://en.wikipedia.org/wiki/Web_2.0#Web_1.0">Web 1.0</a>-in-the-tooth, and still want to support browsing on <ruby lang="ja"><a href="https://en.wikipedia.org/wiki/Gal%C3%A1pagos_syndrome#Mobile_phones">Galápagos phones</a><rp>(</rp><rt style="text-align: center">ガラケー</rt><rp>)</rp></ruby>, which display pages using <a href="https://en.wikipedia.org/wiki/I-mode">cHTML</a>, a subset of HTML that <a href="https://www.docomo.ne.jp/service/developer/make/content/browser/html/tag/">does not support <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code> tags</a>).</p> <p>Regardless, this post represents everything I think I know about <em>furigana</em> for the web, and now you know it, too. If new information comes up, or the specification for use of <code class="language-plaintext highlighter-rouge">&lt;ruby&gt;</code>-related tags changes, I am definitely happy to revise any content. If there is something I have missed, please reach out and let me know!</p> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>All Japanese character displays were confirmed to work as expected on <a href="https://www.google.com/chrome/">Google Chrome</a>. So, if you use another browser, and explanations do not quite match the display, that would be why. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:2" role="doc-endnote"> <p><em>Hiragana</em> is generally used for <em>furigana</em>, but you can also see <em><a href="https://en.wikipedia.org/wiki/Katakana">katakana</a></em> used to annotate some <a href="https://en.wikipedia.org/wiki/Furigana#Names">surnames and place names</a>, as well as convey <a href="https://en.wikipedia.org/wiki/Furigana#Punning_and_double_meaning">double meanings and linguistic puns</a>. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:3" role="doc-endnote"> <p>Placed above when the <em>kanji</em> is written left-to-right horizontally (<em><a href="https://en.wikipedia.org/wiki/Horizontal_and_vertical_writing_in_East_Asian_scripts#Japanese">yokogaki</a></em>), but placed to the right when written right-to-left vertically (<em><a href="https://en.wikipedia.org/wiki/Horizontal_and_vertical_writing_in_East_Asian_scripts#Japanese">tategaki</a></em>). <a href="#fnref:3" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:4" role="doc-endnote"> <p>Or, you could use a browser extension like <a href="https://addons.thunderbird.net/en-us/firefox/addon/rikaichan/">Rikaichan</a> or <a href="https://chrome.google.com/webstore/detail/rikaikun/jipdnfibhldikgcjhfnomkfpcebammhp?hl=en">Rikaikun</a>, which display pop-up kanji readings and English translations when you mouse over them, making any lack of annotations irrelevant. For purposes of this post, we’ll pretend they do not exist (I still absolutely recommend using them, though!). <a href="#fnref:4" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:5" role="doc-endnote"> <p>The name of which is from an old British typography type that had a height of 5.5 <a href="https://en.wikipedia.org/wiki/Point_(typography)">points</a>, and not to be confused with anything related to the <a href="https://www.ruby-lang.org/en/">Ruby</a> programming language. <a href="#fnref:5" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:6" role="doc-endnote"> <p>As well as <ruby lang="ja" class="japanese"> ほずみ <rt class="romaji" style="font-size: 50%"> Hozumi</rt> </ruby>, 八月一日 can be read as <ruby lang="ja" class="japanese"> ほづみ <rt class="romaji" style="font-size: 50%"> Hozumi</rt> </ruby>, <ruby lang="ja" class="japanese"> やぶみ <rt class="romaji" style="font-size: 50%"> Yabumi</rt> </ruby>, and <ruby lang="ja" class="japanese"> はっさく <rt class="romaji" style="font-size: 50%"> Hassaku</rt> </ruby>. <a href="#fnref:6" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:7" role="doc-endnote"> <p>It was tough to keep my own interest up with Liquid since I found using it so frustrating, even after changing my mindset to thinking of it as <a href="https://ideawrights.com/shopify-associative-arrays/">“smart HTML rather than dumb Ruby”</a>. Nevertheless, I got what I wanted in the end after significant trial and error; hopefully, you can save yourself some time and irritation by using the code if you have similar use cases. <a href="#fnref:7" class="reversefootnote" role="doc-backlink">↩</a></p> </li> </ol> </div> </section> <footer class="page__meta"> <p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="/tags/annotation" class="page__taxonomy-item" rel="tag">annotation</a><span class="sep">, </span> <a href="/tags/blog" class="page__taxonomy-item" rel="tag">blog</a><span class="sep">, </span> <a href="/tags/japan" class="page__taxonomy-item" rel="tag">japan</a><span class="sep">, </span> <a href="/tags/japanese" class="page__taxonomy-item" rel="tag">japanese</a><span class="sep">, </span> <a href="/tags/jekyll" class="page__taxonomy-item" rel="tag">jekyll</a><span class="sep">, </span> <a href="/tags/meta" class="page__taxonomy-item" rel="tag">meta</a><span class="sep">, </span> <a href="/tags/%E3%81%B5%E3%82%8A%E3%81%8C%E3%81%AA" class="page__taxonomy-item" rel="tag">ふりがな</a><span class="sep">, </span> <a href="/tags/%E6%8C%AF%E3%82%8A%E4%BB%AE%E5%90%8D" class="page__taxonomy-item" rel="tag">振り仮名</a><span class="sep">, </span> <a href="/tags/%E6%97%A5%E6%9C%AC%E8%AA%9E" class="page__taxonomy-item" rel="tag">日本語</a> </span> </p> <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2022-06-28">June 28, 2022</time></p> </footer> <section class="page__share"> <h4 class="page__share-title">Share on</h4> <a href="https://twitter.com/intent/tweet?via=paulfioravanti&amp;text=Flexbox+Furigana%20https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fflexbox-furigana%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fflexbox-furigana%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fflexbox-furigana%2F&amp;title=Flexbox%20Furigana" class="btn btn--reddit" title="Share on Reddit"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i><span> Reddit</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fflexbox-furigana%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> </section> <nav class="pagination"> <a href="/blog/applescript-records-string-keys/" class="pagination--pager" title="AppleScript Records: Strings as Keys ">Previous</a> <a href="/blog/welcome-back-overwork/" class="pagination--pager" title="“Welcome back” ">Next</a> </nav> </div> <div class="page__comments"> <h4 class="page__comments-title">Leave a comment</h4> <section id="disqus_thread"></section> </div> </article> <div class="page__related"> <h4 class="page__related-title">You may also enjoy</h4> <div class="grid__wrapper"> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2023-12-07/celpax-1Lf5Adh9SCg-unsplash.jpg" alt="person holding white card near green plant"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/coding-test-review-culture-amp/" rel="permalink">Coding Test Review: Culture Amp </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2023-12-07T15:10:00+11:00">December 7, 2023</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 20 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Did I feel empowered to get the coding tests done for which I am responsible? </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2023-10-25/dot-matrix-printer.jpg" alt="Epson LX-300+ dot matrix printer with optional colour kit"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/same-page-hid-device/" rel="permalink">Get on the Same Page as your HID Device </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2023-10-25T16:25:00+11:00">October 25, 2023</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 14 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Does communicating with your HID device seem flaky? You may be looking at the wrong (usage) page. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2023-04-28/obama-medal.jpg" alt="Obama gives medal to himself meme"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/thanks-past-me/" rel="permalink">Thanks, Past-Me </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2023-04-28T15:30:00+10:00">April 28, 2023</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 19 minute read </span> <span class="page__meta-sep"></span> <i class="fas fa-microphone" aria-hidden="true"></i> Audio Narration </p> <p class="archive__item-excerpt" itemprop="description">Past-me wrote stuff down that benefited future-me. Present-me needs to keep paying that forward. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2022-07-05/sliced-apples.jpg" alt="Sliced red apples on a wooden board"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/sharing-applescript-handlers/" rel="permalink">Sharing AppleScript Handlers </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2022-07-05T08:30:00+10:00">July 5, 2022</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 6 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Navigating AppleScript’s awkward handshakes between files. </p> </article> </div> </div> </div> </div> </div> <div class="search-content"> <div class="search-content__inner-wrap"> <form class="search-content__form" onkeydown="return event.key != 'Enter';"> <label class="sr-only" for="search"> Enter your search term... </label> <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..."> </form> <div id="results" class="results"></div> </div> </div> <div id="footer" class="page__footer"> <footer> <div class="page__footer-follow"> <ul class="social-icons"> <li><strong>Follow:</strong></li> <li> <a href="/privacy"> <i class="fas fa-user-shield"></i> Privacy Policy </a> </li> <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> </ul> </div> <div class="page__footer-copyright">© 2024 Paul Fioravanti. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> </footer> </div> <script src="/assets/js/main.min.js"></script> <script src="/assets/js/lunr/lunr.min.js"></script> <script src="/assets/js/lunr/lunr-store.js"></script> <script src="/assets/js/lunr/lunr-en.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q173829KF7"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q173829KF7",{anonymize_ip:!1});</script> <script>var disqus_config=function(){this.page.url="https://www.paulfioravanti.com/blog/flexbox-furigana/",this.page.identifier="/blog/flexbox-furigana"};!function(){var t=document,a=t.createElement("script");a.src="https://paulfioravanti.disqus.com/embed.js",a.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(a)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript> </body> </html>