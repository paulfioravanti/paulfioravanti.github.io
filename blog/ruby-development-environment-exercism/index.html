<!doctype html> <html lang="en" class="no-js"> <head> <meta charset="utf-8"> <title>Setting up a Ruby development environment for Exercism | Floor and Varnish</title> <meta name="description" content="Test-drive your exercises with Guard."> <meta name="author" content="Paul Fioravanti"> <meta property="article:author" content="Paul Fioravanti"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:site_name" content="Floor and Varnish"> <meta property="og:title" content="Setting up a Ruby development environment for Exercism"> <meta property="og:url" content="https://www.paulfioravanti.com/blog/ruby-development-environment-exercism/"> <meta property="og:description" content="Test-drive your exercises with Guard."> <meta property="og:image" content="https://www.paulfioravanti.com/assets/images/2018-01-11/toa-heftiba-183789-unsplash.jpg"> <meta name="twitter:site" content="@paulfioravanti"> <meta name="twitter:title" content="Setting up a Ruby development environment for Exercism"> <meta name="twitter:description" content="Test-drive your exercises with Guard."> <meta name="twitter:url" content="https://www.paulfioravanti.com/blog/ruby-development-environment-exercism/"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://www.paulfioravanti.com/assets/images/2018-01-11/toa-heftiba-183789-unsplash.jpg"> <meta name="twitter:creator" content="@paulfioravanti"> <meta property="article:published_time" content="2018-01-11T15:35:00+11:00"> <meta property="article:modified_time" content="2023-07-24T15:50:00+10:00"> <link rel="canonical" href="https://www.paulfioravanti.com/blog/ruby-development-environment-exercism/"> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Paul Fioravanti",
      "url": "https://www.paulfioravanti.com/",
      "sameAs": ["https://twitter.com/paulfioravanti","https://www.linkedin.com/in/paulfioravanti","https://github.com/paulfioravanti","https://stackoverflow.com/users/567863/paul-fioravanti"]
    
  }
</script> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Floor and Varnish Feed"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script>document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/g,"")+" js ";</script> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript> </head> <body class="layout--single wide"> <nav class="skip-links"> <ul> <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li> <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li> <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li> </ul> </nav> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--> <div class="masthead"> <div class="masthead__inner-wrap"> <div class="masthead__menu"> <nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> Floor and Varnish </a> <ul class="visible-links"><li class="masthead__menu-item"> <a href="/about/">About</a> </li></ul> <button class="search__toggle" type="button"> <span class="visually-hidden">Toggle search</span> <i class="fas fa-search"></i> </button> <button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">Toggle menu</span> <div class="navicon"></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class="initial-content"> <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/assets/images/2018-01-11/toa-heftiba-183789-unsplash.jpg');"> <div class="wrapper"> <h1 id="page-title" class="page__title" itemprop="headline"> Setting up a Ruby development environment for Exercism </h1> <p class="page__lead">Test-drive your exercises with Guard. </p> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-calendar-alt" aria-hidden="true"></i> <time datetime="2018-01-11T15:35:00+11:00">January 11, 2018</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-clock" aria-hidden="true"></i> 6 minute read </span> </p> </div> <span class="page__hero-caption">Photo by <a href="https://unsplash.com/photos/PxM8hw4j3ZY?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Toa Heftiba</a> on <a href="https://unsplash.com/search/photos/royal-guard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a> </span> </div> <div id="main" role="main"> <div class="sidebar sticky"> <div itemscope itemtype="https://schema.org/Person"> <div class="author__avatar"> <a href="/"> <img src="https://s.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee" alt="Paul Fioravanti" itemprop="image"> </a> </div> <div class="author__content"> <a href="/"><h3 class="author__name" itemprop="name">Paul Fioravanti</h3></a> <div class="author__bio" itemprop="description"> <p><img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> code / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> languages <img class="emoji" title=":it:" alt=":it:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ee-1f1f9.png" height="20" width="20"> <img class="emoji" title=":jp:" alt=":jp:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ef-1f1f5.png" height="20" width="20"> / <img class="emoji" title=":heart:" alt=":heart:" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> mech <img class="emoji" title=":keyboard:" alt=":keyboard:" src="https://github.githubassets.com/images/icons/emoji/unicode/2328.png" height="20" width="20"> / Learning stenography</p> </div> </div> <div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button> <ul class="author__urls social-icons"> <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place"> <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Sydney, Australia</span> </li> <li> <a href="https://www.paulfioravanti.com" itemprop="url"> <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span> </a> </li> <li> <a href="mailto:paul@paulfioravanti.com"> <meta itemprop="email" content="paul@paulfioravanti.com"> <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span> </a> </li> <li> <a href="https://keybase.io/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fas fa-fw fa-key" aria-hidden="true"></i><span class="label">Keybase</span> </a> </li> <li> <a href="https://twitter.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span> </a> </li> <li> <a href="https://www.linkedin.com/in/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span> </a> </li> <li> <a href="https://instagram.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span> </a> </li> <li> <a href="https://github.com/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span> </a> </li> <li> <a href="https://stackoverflow.com/users/567863/paul-fioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span> </a> </li> <li> <a href="https://www.youtube.com/@paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer"> <i class="fab fa-fw fa-youtube" aria-hidden="true"></i><span class="label">YouTube</span> </a> </li> <li> <a href="https://www.strava.com/athletes/paulfioravanti" itemprop="sameAs" rel="nofollow noopener noreferrer me"> <i class="fab fa-strava" aria-hidden="true"></i> Strava </a> </li> </ul> </div> </div> <div id="bd_embed_signup"> <form action="https://buttondown.email/api/emails/embed-subscribe/paulfioravanti" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.email/paulfioravanti', 'popupwindow')" class="embeddable-buttondown-form"> <label for="bd-email">Get notified of new posts!</label> <input type="email" name="email" id="bd-email" class="email" placeholder="email address"> <input type="hidden" value="1" name="embed"> <div class="clear"> <input type="submit" value="Subscribe" id="bd-embedded-subscribe" class="button"> </div> <p> I send email when I have new content to share. No spam; unsubscribe at any time. <a href="/privacy">Privacy Policy</a> </p> </form> </div> </div> <article class="page" itemscope itemtype="https://schema.org/CreativeWork"> <meta itemprop="headline" content="Setting up a Ruby development environment for Exercism"> <meta itemprop="description" content="Test-drive your exercises with Guard."> <meta itemprop="datePublished" content="2018-01-11T15:35:00+11:00"> <meta itemprop="dateModified" content="2023-07-24T15:50:00+10:00"> <div class="page__inner-wrap"> <section class="page__content" itemprop="text"> <p>I’m extremely late to the <a href="https://exercism.org/">Exercism</a> party, but I’ve been having lots of fun working my way through <a href="https://exercism.io/tracks/ruby">its Ruby track</a> (see <a href="https://exercism.io/profiles/paulfioravanti">my Exercism profile</a>). The only thing I have missed while working on the exercises is the automated workflows that I would normally have: specifically, having tests and <a href="https://github.com/bbatsov/rubocop">Rubocop</a> run automatically after any file has changed.</p> <p>When I work on any Ruby or <a href="https://rubyonrails.org/">Rails</a> project, I immediately reach for <a href="https://github.com/guard/guard">Guard</a> to help me out with running these kinds of processes, and this time will be no different. However, the structure of a (completed) Ruby Exercism exercise (located by default under <code class="language-plaintext highlighter-rouge">~/exercism/ruby/</code>) does not look like a typical Ruby project:</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_exercise
├── README.md
├── my_exercise.rb
└── my_exercise_test.rb
</code></pre></div></div> <p>It is a single directory with both the implementation and test file in it, which is not the kind of project setup that Guard expects will be used with Ruby. So, Guard will need some extra help on the configuration side of things to figure out how to deal with this. But first, let’s install some gems to get started.</p> <h2 id="install-gems">Install Gems</h2> <p>As well as Guard itself, we’re going to want to install the following other gems:</p> <ul> <li> <a href="https://github.com/guard/guard-minitest">Guard::Minitest</a>: Tests in Exercism are written using <a href="https://github.com/seattlerb/minitest">Minitest</a>, so this gem will make sure Guard launches the tests with the Minitest framework.</li> <li> <a href="https://github.com/yujinakayama/guard-rubocop">guard-rubocop</a>: Runs Rubocop when files are modified.</li> </ul> <p>Since there is no <a href="https://bundler.io/">Bundler</a> or <a href="https://bundler.io/gemfile.html"><code class="language-plaintext highlighter-rouge">Gemfile</code></a> in sight, we will be installing these gems globally:</p> <blockquote> <p>If you use the <a href="https://github.com/asdf-vm/asdf">asdf</a> version manager, add these gems to your <a href="https://github.com/asdf-vm/asdf-ruby#default-gems">default gems file</a> so that you don’t need to worry about manually installing them globally again if you update your Ruby version.</p> </blockquote> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>guard guard-minitest guard-rubocop
</code></pre></div></div> <h2 id="generate-guardfile">Generate Guardfile</h2> <p>After installing the gems, change into your <code class="language-plaintext highlighter-rouge">exercism/ruby</code> directory (wherever it is installed on your system), and generate the <code class="language-plaintext highlighter-rouge">Guardfile</code>:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>guard init
</code></pre></div></div> <blockquote> <p>If you find this command does not work, depending on your Ruby version manager, you may need to perform a reshim of Ruby executables.</p> </blockquote> <p>Typically, you will have one <code class="language-plaintext highlighter-rouge">Guardfile</code> per Ruby project, but rather than have one per Exercism exercise, which will get old very fast, the plan is to have a single <code class="language-plaintext highlighter-rouge">Guardfile</code> that any Ruby exercise can use, and that’s why we generated it in the top level Ruby directory.</p> <p>The generated <code class="language-plaintext highlighter-rouge">Guardfile</code> will look something like this:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">guard</span> <span class="ss">:minitest</span> <span class="k">do</span>
  <span class="c1"># with Minitest::Unit</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^test/(.*)</span><span class="se">\/</span><span class="sr">?test_(.*)</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^lib/(.*/)?([^/]+)</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"test/</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">test_</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">.rb"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^test/test_helper</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span>  <span class="p">{</span> <span class="s1">'test'</span> <span class="p">}</span>

  <span class="c1"># with Minitest::Spec</span>
  <span class="c1"># watch(%r{^spec/(.*)_spec\.rb$})</span>
  <span class="c1"># ...</span>

  <span class="c1"># Rails 4</span>
  <span class="c1"># watch(%r{^app/(.+)\.rb$}) { |m| "test/#{m[1]}_test.rb" }</span>
  <span class="c1"># ...</span>

  <span class="c1"># Rails &lt; 4</span>
  <span class="c1"># ...</span>
<span class="k">end</span>

<span class="n">guard</span> <span class="ss">:rubocop</span> <span class="k">do</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{.+</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{(?:.+/)?</span><span class="se">\.</span><span class="sr">rubocop(?:_todo)?</span><span class="se">\.</span><span class="sr">yml$}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div> <h2 id="guard-minitest-configuration">Guard Minitest configuration</h2> <p>First, delete all the non-<code class="language-plaintext highlighter-rouge">Minitest::Unit</code> configuration to get that out of the way, and let’s take a closer look at exactly what the remaining configuration does:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">guard</span> <span class="ss">:minitest</span> <span class="k">do</span>
  <span class="c1"># When a test file (defined as a Ruby file that starts with `test_`)</span>
  <span class="c1"># located under the `test/` directory is modified, run that test.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^test/(.*)</span><span class="se">\/</span><span class="sr">?test_(.*)</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span>
  <span class="c1"># When a Ruby file located under the `lib/` directory is modified,</span>
  <span class="c1"># run the test file located under the `test/` directory for that Ruby file.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^lib/(.*/)?([^/]+)</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"test/</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">test_</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">.rb"</span> <span class="p">}</span>
  <span class="c1"># When the `test/test_helper.rb` file is modified, run the entire test suite.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^test/test_helper</span><span class="se">\.</span><span class="sr">rb$}</span><span class="p">)</span>  <span class="p">{</span> <span class="s1">'test'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div> <p>Unfortunately, it looks like we cannot use <em>any</em> of Guard’s default configuration here as-is because:</p> <ul> <li>In Exercism, everything is in the same directory, so there are no <code class="language-plaintext highlighter-rouge">lib/</code> or <code class="language-plaintext highlighter-rouge">test/</code> directories to go looking in.</li> <li>The naming for Exercism test files is <code class="language-plaintext highlighter-rouge">*_test.rb</code>, not <code class="language-plaintext highlighter-rouge">test_*.rb</code>.</li> <li>There is no <code class="language-plaintext highlighter-rouge">test_helper.rb</code> file.</li> </ul> <p>So, we’re going to have to re-write the configuration from scratch, but before we do that, let’s determine what we actually want Guard to do for us within an Exercism exercise directory. For me at least, what I would want is:</p> <ul> <li>If I modify the test file under the exercise root directory, run it again</li> <li>If I modify the implementation file under the exercise root directory, run its test file, which is also located under the exercise root directory</li> </ul> <p>To do that, I came up with the following:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">guard</span> <span class="ss">:minitest</span><span class="p">,</span> <span class="ss">test_folders: </span><span class="p">[</span><span class="s2">"."</span><span class="p">]</span> <span class="k">do</span>
  <span class="c1"># Re-test test files when they're modified.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">.+_test</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"./</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
  <span class="c1"># Run the test file of the implementation (non-test) file that was modified.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">(.+)(?&lt;!_test)</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"./</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">_test.rb"</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div> <p>Let’s examine some of the reasons behind these lines:</p> <ul> <li>The <code class="language-plaintext highlighter-rouge">test_folders</code> flag was added to specifically tell Guard::Minitest that test files are located in the current directory (<code class="language-plaintext highlighter-rouge">"."</code>) because <a href="https://github.com/guard/guard-minitest#list-of-available-options">by default it will look inside <code class="language-plaintext highlighter-rouge">test</code> or <code class="language-plaintext highlighter-rouge">spec</code> directories</a>.</li> <li>The string values in the blocks for both <code class="language-plaintext highlighter-rouge">watch</code> functions need to resemble a path, otherwise no processes would run. For example, <code class="language-plaintext highlighter-rouge">watch(%r{\A.+_test\.rb\z}) { |m| "#{m[1]}" }</code> would not work: the block value <em>needs</em> to be <code class="language-plaintext highlighter-rouge">"./#{m[1]}"</code> (figuring this out was a painful gotcha).</li> <li>Since both implementation and test file are in the same directory, the last statement uses a <a href="https://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Anchors">negative lookbehind assertion</a> (<code class="language-plaintext highlighter-rouge">(?&lt;!_test)</code>) to make sure that when <code class="language-plaintext highlighter-rouge">./bob.rb</code> is modified, <code class="language-plaintext highlighter-rouge">./bob_test.rb</code> is run, but when <code class="language-plaintext highlighter-rouge">./bob_test.rb</code> is modified, Guard does not attempt to run a non-existent <code class="language-plaintext highlighter-rouge">./bob_test_test.rb</code> file.</li> </ul> <h2 id="guard-rubocop-configuration">Guard Rubocop configuration</h2> <p>Much like it is easier to have one <code class="language-plaintext highlighter-rouge">Guardfile</code> that can be used for all Exercism exercises, the same is true for your Rubocop configuration file (<code class="language-plaintext highlighter-rouge">.rubocop.yml</code>). If you have a specific <code class="language-plaintext highlighter-rouge">.rubocop.yml</code> file that you want to use just for Exercism, then place it under your <code class="language-plaintext highlighter-rouge">exercism/ruby</code> directory, and <a href="https://docs.rubocop.org/rubocop/configuration.html">it will get found when you run the <code class="language-plaintext highlighter-rouge">rubocop</code> command</a>.</p> <p>For the guard-rubocop configuration, we will need to re-write the first rule slightly (<code class="language-plaintext highlighter-rouge">watch(%r{.+\.rb$})</code>) because it currently will run Rubocop over all Ruby files, including the Exercism test file, which is not written by us (and therefore we are not responsible for whether it is written to Rubocop’s standards). So, we’ll use a similar negative lookbehind assertion to fix that problem:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">guard</span> <span class="ss">:rubocop</span> <span class="k">do</span>
  <span class="c1"># Only run Rubocop over implementation files</span>
  <span class="c1"># as test files are not written by students.</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">(.+)(?&lt;!_test)</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{(?:.+/)?</span><span class="se">\.</span><span class="sr">rubocop</span><span class="se">\.</span><span class="sr">yml</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div> <h2 id="putting-it-all-together">Putting it all together</h2> <p>My final <code class="language-plaintext highlighter-rouge">~/exercism/ruby/Guardfile</code>, with some extra bits of configuration, looks like the following:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># frozen_string_literal: true</span>

<span class="n">group</span> <span class="ss">:red_green_refactor</span><span class="p">,</span> <span class="ss">halt_on_fail: </span><span class="kp">true</span> <span class="k">do</span>
  <span class="n">guard</span> <span class="ss">:minitest</span><span class="p">,</span> <span class="ss">all_on_start: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">test_folders: </span><span class="p">[</span><span class="s2">"."</span><span class="p">]</span> <span class="k">do</span>
    <span class="c1"># Re-test test files when they're edited.</span>
    <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">.+_test</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"./</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
    <span class="c1"># Run the test file of the file that was edited.</span>
    <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">(.+)(?&lt;!_test)</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"./</span><span class="si">#{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">_test.rb"</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">guard</span> <span class="ss">:rubocop</span><span class="p">,</span> <span class="ss">all_on_start: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">cli: </span><span class="p">[</span><span class="s2">"--display-cop-names"</span><span class="p">]</span> <span class="k">do</span>
    <span class="c1"># Only run Rubocop over implementation files</span>
    <span class="c1"># as test files are not written by me.</span>
    <span class="n">watch</span><span class="p">(</span><span class="sr">%r{</span><span class="se">\A</span><span class="sr">(.+)(?&lt;!_test)</span><span class="se">\.</span><span class="sr">rb</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span>
    <span class="n">watch</span><span class="p">(</span><span class="sr">%r{(?:.+/)?</span><span class="se">\.</span><span class="sr">rubocop</span><span class="se">\.</span><span class="sr">yml</span><span class="se">\z</span><span class="sr">}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>The optional <code class="language-plaintext highlighter-rouge">red_green_refactor</code> group idea is lifted directly from the <a href="https://github.com/yujinakayama/guard-rubocop#advanced-tips">guard-rubocop <code class="language-plaintext highlighter-rouge">README</code> file</a>, and makes perfect sense to me: get your tests passing first, and only then worry about whether your code looks nice.</p> <p>This configuration might change over time, so you can always get the latest version from <a href="https://github.com/paulfioravanti/exercism">my Exercism Github repo</a>.</p> <h2 id="running-guard">Running Guard</h2> <p>Now that the <code class="language-plaintext highlighter-rouge">Guardfile</code> is set up with Minitest and Rubocop, you will need to make sure to tell Guard where to find this configuration when you run it:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>guard <span class="nt">--guardfile</span> ~/exercism/ruby/Guardfile
</code></pre></div></div> <p>And that should be it! You should now have a pair of friendly robots looking over your shoulder while you’re solving the exercises, helping you to submit the best solution that you can.</p> </section> <footer class="page__meta"> <p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="/tags/exercism" class="page__taxonomy-item" rel="tag">exercism</a><span class="sep">, </span> <a href="/tags/guard" class="page__taxonomy-item" rel="tag">guard</a><span class="sep">, </span> <a href="/tags/rubocop" class="page__taxonomy-item" rel="tag">rubocop</a><span class="sep">, </span> <a href="/tags/ruby" class="page__taxonomy-item" rel="tag">ruby</a> </span> </p> <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2023-07-24">July 24, 2023</time></p> </footer> <section class="page__share"> <h4 class="page__share-title">Share on</h4> <a href="https://twitter.com/intent/tweet?via=paulfioravanti&amp;text=Setting+up+a+Ruby+development+environment+for+Exercism%20https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fruby-development-environment-exercism%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fruby-development-environment-exercism%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fruby-development-environment-exercism%2F&amp;title=Setting%20up%20a%20Ruby%20development%20environment%20for%20Exercism" class="btn btn--reddit" title="Share on Reddit"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i><span> Reddit</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.paulfioravanti.com%2Fblog%2Fruby-development-environment-exercism%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> </section> <nav class="pagination"> <a href="/blog/wii-remote-best-presentation-remote/" class="pagination--pager" title="Wii Remote is Best Presentation Remote ">Previous</a> <a href="/blog/tmuxinator-exercism/" class="pagination--pager" title="Tmuxinator for Exercism ">Next</a> </nav> </div> <div class="page__comments"> <h4 class="page__comments-title">Leave a comment</h4> <section id="disqus_thread"></section> </div> </article> <div class="page__related"> <h4 class="page__related-title">You may also enjoy</h4> <div class="grid__wrapper"> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2023-04-28/obama-medal.jpg" alt="Obama gives medal to himself meme"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/thanks-past-me/" rel="permalink">Thanks, Past-Me </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2023-04-28T15:30:00+10:00">April 28, 2023</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 19 minute read </span> <span class="page__meta-sep"></span> <i class="fas fa-microphone" aria-hidden="true"></i> Audio Narration </p> <p class="archive__item-excerpt" itemprop="description">Past-me wrote stuff down that benefited future-me. Present-me needs to keep paying that forward. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2022-07-05/sliced-apples.jpg" alt="Sliced red apples on a wooden board"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/sharing-applescript-handlers/" rel="permalink">Sharing AppleScript Handlers </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2022-07-05T08:30:00+10:00">July 5, 2022</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 6 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Navigating AppleScript’s awkward handshakes between files. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2022-07-03/working-late.jpg" alt="On the beers, working late in a hotel room"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/welcome-back-overwork/" rel="permalink">“Welcome back” </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2022-07-03T12:50:00+10:00">July 3, 2022</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 5 minute read </span> <span class="page__meta-sep"></span> <i class="fas fa-microphone" aria-hidden="true"></i> Audio Narration </p> <p class="archive__item-excerpt" itemprop="description">A short story of overwork from the software trenches of Tokyo. </p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <div class="archive__item-teaser"> <img src="/assets/images/2022-06-25/menu-with-furigana.jpg" alt="大和田鮨"> </div> <h2 class="archive__item-title no_toc" itemprop="headline"> <a href="/blog/flexbox-furigana/" rel="permalink">Flexbox Furigana </a> </h2> <p class="page__meta"> <span class="page__meta-date"> <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i> <time datetime="2022-06-25T10:30:00+10:00">June 25, 2022</time> </span> <span class="page__meta-sep"></span> <span class="page__meta-readtime"> <i class="far fa-fw fa-clock" aria-hidden="true"></i> 18 minute read </span> </p> <p class="archive__item-excerpt" itemprop="description">Styling kanji readings is a big subject for such small text. </p> </article> </div> </div> </div> </div> </div> <div class="search-content"> <div class="search-content__inner-wrap"> <form class="search-content__form" onkeydown="return event.key != 'Enter';"> <label class="sr-only" for="search"> Enter your search term... </label> <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..."> </form> <div id="results" class="results"></div> </div> </div> <div id="footer" class="page__footer"> <footer> <div class="page__footer-follow"> <ul class="social-icons"> <li><strong>Follow:</strong></li> <li> <a href="/privacy"> <i class="fas fa-user-shield"></i> Privacy Policy </a> </li> <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> </ul> </div> <div class="page__footer-copyright">© 2023 Paul Fioravanti. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> </footer> </div> <script src="/assets/js/main.min.js"></script> <script src="/assets/js/lunr/lunr.min.js"></script> <script src="/assets/js/lunr/lunr-store.js"></script> <script src="/assets/js/lunr/lunr-en.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q173829KF7"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q173829KF7",{anonymize_ip:!1});</script> <script>var disqus_config=function(){this.page.url="https://www.paulfioravanti.com/blog/ruby-development-environment-exercism/",this.page.identifier="/blog/ruby-development-environment-exercism"};!function(){var e=document,t=e.createElement("script");t.src="https://paulfioravanti.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript> </body> </html>